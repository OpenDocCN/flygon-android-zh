["```java\nclasspath 'com.google.gms:google-services:3.0.0'\n\n```", "```java\ncompile 'com.firebase:firebase-client-android:2.5.2+'\ncompile 'com.android.volley:volley:1.0.0'\ncompile 'com.android.support:design:25.1.1'\ncompile 'com.android.support:cardview-v7:25.1.1'\n\n```", "```java\npendingResult.setResultCallback(new ResultCallback<DataItemResult>() {\n    @Override\n    public void onResult(final DataItemResult result) {\n        if(result.getStatus().isSuccess()) {\n            Log.d(TAG, \"Data item set: \" + \n            result.getDataItem().getUri());\n        }\n    }\n});\n\n```", "```java\nDataItemResult result = pendingResult.await();\nif(result.getStatus().isSuccess()) {\n    Log.d(TAG, \"Data item set: \" + result.getDataItem().getUri());\n}\n\n```", "```java\npublic class DataLayerListenerService extends WearableListenerService {\n\n    private static final String TAG = \"DataLayerSample\";\n    private static final String START_ACTIVITY_PATH = \"/start-\n    activity\";\n    private static final String DATA_ITEM_RECEIVED_PATH = \"/data-item-\n    received\";\n\n    @Override\n    public void onDataChanged(DataEventBuffer dataEvents) {\n        if (Log.isLoggable(TAG, Log.DEBUG)) {\n            Log.d(TAG, \"onDataChanged: \" + dataEvents);\n        }\n\n        GoogleApiClient googleApiClient = new \n        GoogleApiClient.Builder(this)\n                .addApi(Wearable.API)\n                .build();\n\n        ConnectionResult connectionResult =\n        googleApiClient.blockingConnect(30, TimeUnit.SECONDS);\n\n        if (!connectionResult.isSuccess()) {\n            Log.e(TAG, \"Failed to connect to GoogleApiClient.\");\n            return;\n        }\n\n        // Loop through the events and send a message\n        // to the node that created the data item.\n        for (DataEvent event : dataEvents) {\n            Uri uri = event.getDataItem().getUri();\n\n            // Get the node id from the host value of the URI\n            String nodeId = uri.getHost();\n            // Set the data of the message to be the bytes of the URI\n            byte[] payload = uri.toString().getBytes();\n\n            // Send the RPC\n            Wearable.MessageApi.sendMessage(googleApiClient, nodeId,\n            DATA_ITEM_RECEIVED_PATH, payload);\n        }\n    }\n}\n\n```", "```java\n<service android:name=\".DataLayerListenerService\">\n  <intent-filter>\n      <action \n      android:name=\"com.google.android.gms.wearable.DATA_CHANGED\" />\n      <data android:scheme=\"wear\" android:host=\"*\"\n               android:path=\"/start-activity\" />\n  </intent-filter>\n</service>\n\n```", "```java\n<resources>\n    <string-array name=\"android_wear_capabilities\">\n        <item>voice_transcription</item>\n    </string-array>\n</resources>\n\n```", "```java\nprivate static final String\n        VOICE_TRANSCRIPTION_CAPABILITY_NAME = \"voice_transcription\";\n\nprivate GoogleApiClient mGoogleApiClient;\n\n...\n\nprivate void setupVoiceTranscription() {\n    CapabilityApi.GetCapabilityResult result =\n            Wearable.CapabilityApi.getCapability(\n                    mGoogleApiClient, \n                    VOICE_TRANSCRIPTION_CAPABILITY_NAME,\n                    CapabilityApi.FILTER_REACHABLE).await();\n\n    updateTranscriptionCapability(result.getCapability());\n}\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <color name=\"colorPrimary\">#129793</color>\n    <color name=\"colorPrimaryDark\">#006865</color>\n    <color name=\"colorAccent\">#ffaf40</color>\n    <color name=\"white\">#fff</color>\n</resources>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n\n <!-- When item pressed this item will be triggered -->    <item android:state_pressed=\"true\">\n        <shape android:shape=\"rectangle\">\n        <corners android:radius=\"25dp\" />\n        <solid android:color=\"@color/colorPrimaryDark\" />\n    </shape>\n   </item>\n\n <!-- By default the background will be this item -->    <item>\n        <shape android:shape=\"rectangle\">\n        <corners android:radius=\"25dp\" />\n        <solid android:color=\"@color/colorPrimary\" />\n    </shape>\n</item>\n\n</selector>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fillViewport=\"true\"\n    android:fitsSystemWindows=\"true\">\n\n    <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n       <!-- Your design code goes here -->\n\n   </RelativeLayout>\n</ScrollView>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fillViewport=\"true\"\n    android:fitsSystemWindows=\"true\">\n\n    <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n        <LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:layout_marginTop=\"25dp\"\n            android:orientation=\"vertical\">\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:layout_marginBottom=\"24dp\"\n\n                android:gravity=\"center|center_horizontal\n                |center_vertical\"\n                android:text=\"Welcome to Packt Smartchat\"\n                android:textColor=\"@color/colorPrimaryDark\"\n                android:textSize=\"25sp\"\n                android:textStyle=\"bold\" />\n\n            <!--  Email Label -->\n\n            <android.support.v7.widget.CardView\n                android:layout_margin=\"10dp\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:orientation=\"vertical\">\n\n                <LinearLayout\n                    android:padding=\"5dp\"\n                    android:orientation=\"vertical\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\">\n\n                <android.support.design.widget.TextInputLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_marginBottom=\"8dp\"\n                    android:layout_marginTop=\"8dp\">\n\n                    <EditText\n                        android:id=\"@+id/input_email\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:hint=\"Username\"\n                        android:inputType=\"textEmailAddress\"\n                        android:windowSoftInputMode=\"stateHidden\" />\n                </android.support.design.widget.TextInputLayout>\n\n                <!--  Password Label -->\n                <android.support.design.widget.TextInputLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_marginBottom=\"8dp\"\n                    android:layout_marginTop=\"8dp\"\n                    app:passwordToggleEnabled=\"true\">\n\n                    <EditText\n                        android:id=\"@+id/input_password\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:hint=\"Password\"\n                        android:inputType=\"textPassword\"\n                        android:windowSoftInputMode=\"stateHidden\" />\n                </android.support.design.widget.TextInputLayout>\n                </LinearLayout>\n            </android.support.v7.widget.CardView>\n\n            <LinearLayout\n                android:layout_width=\"fill_parent\"\n                android:layout_height=\"wrap_content\"\n                android:orientation=\"horizontal\"\n                android:paddingBottom=\"5dp\"\n                android:paddingTop=\"8dp\">\n\n                <TextView\n                    android:id=\"@+id/register\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_weight=\"1\"\n                    android:gravity=\"end\"\n                    android:padding=\"5dp\"\n                    android:text=\"No Account? Register\"\n                    android:textSize=\"14sp\" />\n            </LinearLayout>\n\n            <Button\n                android:id=\"@+id/btn_login\"\n                android:layout_width=\"150dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center\"\n                android:layout_marginBottom=\"24dp\"\n                android:layout_marginTop=\"24dp\"\n                android:background=\"@drawable/buttonbg\"\n                android:textColor=\"@color/white\"\n                android:textStyle=\"bold\"\n                android:padding=\"12dp\"\n                android:text=\"Login\" />\n\n        </LinearLayout>\n    </RelativeLayout>\n\n</ScrollView>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fillViewport=\"true\"\n    android:fitsSystemWindows=\"true\">\n\n    <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n\n        <LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:layout_marginTop=\"25dp\"\n            android:orientation=\"vertical\">\n\n            <TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:layout_marginBottom=\"24dp\"\n                android:gravity=\"center\n                |center_horizontal|center_vertical\"\n                android:text=\"Register\"\n                android:textColor=\"@color/colorPrimaryDark\"\n                android:textSize=\"25sp\"\n                android:textStyle=\"bold\" />\n\n            <!--  Email Label -->\n\n            <android.support.v7.widget.CardView\n                android:layout_margin=\"10dp\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:orientation=\"vertical\">\n\n                <LinearLayout\n                    android:padding=\"5dp\"\n                    android:orientation=\"vertical\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\">\n\n                    <android.support.design.widget.TextInputLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:layout_marginBottom=\"8dp\"\n                        android:layout_marginTop=\"8dp\">\n\n                        <EditText\n                            android:id=\"@+id/input_email\"\n                            android:layout_width=\"match_parent\"\n                            android:layout_height=\"wrap_content\"\n                            android:hint=\"Username\"\n                            android:inputType=\"textEmailAddress\"\n                            android:windowSoftInputMode=\"stateHidden\" \n                        />\n                    </android.support.design.widget.TextInputLayout>\n\n                    <!--  Password Label -->\n                    <android.support.design.widget.TextInputLayout\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:layout_marginBottom=\"8dp\"\n                        android:layout_marginTop=\"8dp\"\n                        app:passwordToggleEnabled=\"true\">\n\n                        <EditText\n                            android:id=\"@+id/input_password\"\n                            android:layout_width=\"match_parent\"\n                            android:layout_height=\"wrap_content\"\n                            android:hint=\"Password\"\n                            android:inputType=\"textPassword\"\n                            android:windowSoftInputMode=\"stateHidden\" \n                         />\n                    </android.support.design.widget.TextInputLayout>\n                </LinearLayout>\n            </android.support.v7.widget.CardView>\n\n            <LinearLayout\n                android:layout_width=\"fill_parent\"\n                android:layout_height=\"wrap_content\"\n                android:orientation=\"horizontal\"\n                android:paddingBottom=\"5dp\"\n                android:paddingTop=\"8dp\">\n\n            </LinearLayout>\n\n            <Button\n                android:id=\"@+id/btn_submit\"\n                android:layout_width=\"150dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center\"\n                android:layout_marginBottom=\"24dp\"\n                android:layout_marginTop=\"24dp\"\n                android:background=\"@drawable/buttonbg\"\n                android:textColor=\"@color/white\"\n                android:textStyle=\"bold\"\n                android:padding=\"12dp\"\n                android:text=\"Submit\" />\n\n        </LinearLayout>\n    </RelativeLayout>\n\n</ScrollView>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    android:padding=\"16dp\">\n\n    <TextView\n        android:id=\"@+id/noUsersText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"No users found!\"\n        android:visibility=\"gone\" />\n\n    <ListView\n        android:id=\"@+id/usersList\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" />\n\n</LinearLayout>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"#ffffff\"\n    android:orientation=\"vertical\"\n    tools:context=\"com.packt.smartchat.MainActivity\">\n\n    <ScrollView\n        android:layout_width=\"match_parent\"\n        android:layout_weight=\"20\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/scrollView\">\n\n        <LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"vertical\"\n            android:id=\"@+id/layout1\">\n        </LinearLayout>\n\n    </ScrollView>\n\n    <include\n        layout=\"@layout/message_area\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"bottom\"\n        android:layout_marginTop=\"5dp\"/>\n</LinearLayout>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/colorPrimaryDark\"\n    android:gravity=\"bottom\"\n    android:orientation=\"horizontal\">\n\n    <EditText\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:textColorHint=\"#CFD8DC\"\n        android:textColor=\"#CFD8DC\"\n        android:singleLine=\"true\"\n        android:hint=\"Write a message...\"\n        android:id=\"@+id/messageArea\"\n        android:maxHeight=\"80dp\" />\n\n    <ImageView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"4\"\n        android:padding=\"4dp\"\n        android:src=\"img/ic_menu_send\"\n        android:id=\"@+id/sendButton\"/>\n</LinearLayout>\n\n```", "```java\n <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\n <uses-permission android:name=\"android.permission.INTERNET\" />\n\n```", "```java\nprivate TextView mRegister;\nprivate EditText mUsername, mPassword;\nprivate Button mLoginButton;\npublic String mUserStr, mPassStr;\n\n```", "```java\nmRegister = (TextView)findViewById(R.id.register);\nmUsername = (EditText)findViewById(R.id.input_email);\nmPassword = (EditText)findViewById(R.id.input_password);\nmLoginButton = (Button)findViewById(R.id.btn_login);\n\n```", "```java\nmRegister.setOnClickListener(new View.OnClickListener() {\n\n    @Override\n    public void onClick(View v) {\n        startActivity(new Intent(MainActivity.this, \n        RegistrationActivity.class));\n    }\n});\n\n```", "```java\n//In Global scope of registration activity \nprivate EditText mUsername, mPassword;\nprivate Button mSubmitButton;\npublic String mUserStr, mPassStr;\n\n// Inside the oncreate method\nFirebase.setAndroidContext(this);\nmUsername = (EditText)findViewById(R.id.input_email);\nmPassword = (EditText)findViewById(R.id.input_password);\nmSubmitButton = (Button)findViewById(R.id.btn_submit);\n\n```", "```java\nmSubmitButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n      // Input fields\n      // Validation logics\n    }\n});\n\n```", "```java\nmSubmitButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        mUserStr = mUsername.getText().toString();\n        mPassStr = mPassword.getText().toString();\n\n        // Validation\n        if(mUserStr.equals(\"\")){\n            mUsername.setError(\"can't be blank\");\n        }\n        else if(mPassStr.equals(\"\")){\n            mPassword.setError(\"can't be blank\");\n        }\n        else if(!mUserStr.matches(\"[A-Za-z0-9]+\")){\n            mUsername.setError(\"only alphabet or number allowed\");\n        }\n        else if(mUserStr.length()<5){\n            mUsername.setError(\"at least 5 characters long\");\n        }\n        else if(mPassStr.length()<5){\n            mPassword.setError(\"at least 5 characters long\");\n        }\n    }\n});\n\n```", "```java\n{\n \"rules\": {\n \".read\": true,\n \".write\": true\n }\n}\n\n```", "```java\nelse {\n        final ProgressDialog pd = new \n        ProgressDialog(RegistrationActivity.this);\n        pd.setMessage(\"Loading...\");\n        pd.show();\n\n        String url = \"https://packt-wear.firebaseio.com/users.json\";\n\n        StringRequest request = new StringRequest(Request.Method.GET, \n        url, new Response.Listener<String>(){\n            @Override\n            public void onResponse(String s) {\n                Firebase reference = new Firebase(\"https://packt-\n                wear.firebaseio.com/users\");\n                if(s.equals(\"null\")) {\n                    reference.child(mUserStr)\n                    .child(\"password\").setValue(mPassStr);\n                    Toast.makeText(RegistrationActivity.this, \n                    \"registration successful\", \n                    Toast.LENGTH_LONG).show();\n                }\n                else {\n                    try {\n                        JSONObject obj = new JSONObject(s);\n\n                        if (!obj.has(mUserStr)) {\n                            reference.child(mUserStr)\n                            .child(\"password\").setValue(mPassStr);\n                            Toast.makeText(RegistrationActivity.this,   \n                            \"registration successful\", \n                            Toast.LENGTH_LONG).show();\n                        } else {\n                            Toast.makeText(RegistrationActivity.this, \n                            \"username already exists\", \n                            Toast.LENGTH_LONG).show();\n                        }\n\n                    } catch (JSONException e) {\n                        e.printStackTrace();\n                    }\n                }\n\n                pd.dismiss();\n            }\n\n        },new Response.ErrorListener(){\n            @Override\n            public void onErrorResponse(VolleyError volleyError) {\n                System.out.println(\"\" + volleyError );\n                pd.dismiss();\n            }\n        });\n\n        RequestQueue rQueue = \n        Volley.newRequestQueue(RegistrationActivity.this);\n        rQueue.add(request);\n    }\n}\n\n```", "```java\npublic class RegistrationActivity extends AppCompatActivity {\n\n    private EditText mUsername, mPassword;\n    private Button mSubmitButton;\n    public String mUserStr, mPassStr;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_registration);\n\n        mUsername = (EditText)findViewById(R.id.input_email);\n        mPassword = (EditText)findViewById(R.id.input_password);\n        mSubmitButton = (Button)findViewById(R.id.btn_submit);\n\n        Firebase.setAndroidContext(this);\n\n        mSubmitButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mUserStr = mUsername.getText().toString();\n                mPassStr = mPassword.getText().toString();\n\n                // Validation\n                if(mUserStr.equals(\"\")){\n                    mUsername.setError(\"can't be blank\");\n                }\n                else if(mPassStr.equals(\"\")){\n                    mPassword.setError(\"can't be blank\");\n                }\n                else if(!mUserStr.matches(\"[A-Za-z0-9]+\")){\n                    mUsername.setError(\"only alphabet or number \n                    allowed\");\n                }\n                else if(mUserStr.length()<5){\n                    mUsername.setError(\"at least 5 characters long\");\n                }\n                else if(mPassStr.length()<5){\n                    mPassword.setError(\"at least 5 characters long\");\n                }else {\n                    final ProgressDialog pd = new \n                    ProgressDialog(RegistrationActivity.this);\n                    pd.setMessage(\"Loading...\");\n                    pd.show();\n\n                    String url = \"https://packt-\n                    wear.firebaseio.com/users.json\";\n\n                    StringRequest request = new StringRequest\n                    (Request.Method.GET, url, \n                    new Response.Listener<String>(){\n                        @Override\n                        public void onResponse(String s) {\n                            Firebase reference = new Firebase\n                        (\"https://packt-wear.firebaseio.com/users\");\n                            if(s.equals(\"null\")) {\n                                reference.child(mUserStr)\n                                .child(\"password\").setValue(mPassStr);\n                                Toast.makeText\n                                (RegistrationActivity.this, \n                                \"registration successful\", \n                                Toast.LENGTH_LONG).show();\n                            }\n                            else {\n                                try {\n                                    JSONObject obj = new JSONObject(s);\n\n                                    if (!obj.has(mUserStr)) {\n                                        reference.child(mUserStr)\n                                        .child(\"password\")\n                                        .setValue(mPassStr);\n                                        Toast.makeText\n                                        (RegistrationActivity.this, \n                                        \"registration successful\", \n                                        Toast.LENGTH_LONG).show();\n                                    } else {\n                                        Toast.makeText\n                                        (RegistrationActivity.this, \n                                        \"username already exists\", \n                                        Toast.LENGTH_LONG).show();\n                                    }\n\n                                } catch (JSONException e) {\n                                    e.printStackTrace();\n                                }\n                            }\n\n                            pd.dismiss();\n                        }\n\n                    },new Response.ErrorListener(){\n                        @Override\n                        public void onErrorResponse(VolleyError    \n                        volleyError) {\n                            System.out.println(\"\" + volleyError );\n                            pd.dismiss();\n                        }\n                    });\n\n                    RequestQueue rQueue = \n                    Volley.newRequestQueue\n                    (RegistrationActivity.this);\n                    rQueue.add(request);\n                }\n            }\n        });\n\n    }\n}\n\n```", "```java\npublic class User {\n    static String username = \"\";\n    static String password = \"\";\n    static String chatWith = \"\";\n}\n\n```", "```java\n   mUserStr = mUsername.getText().toString();\n    mPassStr = mPassword.getText().toString();\n\n    if(mUserStr.equals(\"\")){\n        mUsername.setError(\"Please enter your username\");\n    }\n    else if(mPassStr.equals(\"\")){\n        mPassword.setError(\"can't be blank\");\n    }\n    else{\n        String url = \"https://packt-wear.firebaseio.com/users.json\";\n        final ProgressDialog pd = new \n        ProgressDialog(MainActivity.this);\n        pd.setMessage(\"Loading...\");\n        pd.show();\n\n        StringRequest request = new StringRequest(Request.Method.GET, \n        url, new Response.Listener<String>(){\n            @Override\n            public void onResponse(String s) {\n                if(s.equals(\"null\")){\n                    Toast.makeText(MainActivity.this, \"user not found\", \n                    Toast.LENGTH_LONG).show();\n                }\n                else{\n                    try {\n                        JSONObject obj = new JSONObject(s);\n\n                        if(!obj.has(mUserStr)){\n                            Toast.makeText(MainActivity.this, \"user not \n                            found\", Toast.LENGTH_LONG).show();\n                        }\n                        else if(obj.getJSONObject(mUserStr)\n                        .getString(\"password\").equals(mPassStr)){\n                            User.username = mUserStr;\n                            User.password = mPassStr;\n                            startActivity(new Intent(MainActivity.this, \n                            UsersListActivity.class));\n                        }\n                        else {\n                            Toast.makeText(MainActivity.this, \n                            \"incorrect password\", Toast\n                           .LENGTH_LONG).show();\n                        }\n                    } catch (JSONException e) {\n                        e.printStackTrace();\n                    }\n                }\n\n                pd.dismiss();\n            }\n        },new Response.ErrorListener(){\n            @Override\n            public void onErrorResponse(VolleyError volleyError) {\n                System.out.println(\"\" + volleyError);\n                pd.dismiss();\n            }\n        });\n\n        RequestQueue rQueue = \n        Volley.newRequestQueue(MainActivity.this);\n        rQueue.add(request);\n    }\n}\n\n```", "```java\npublic class MainActivity extends AppCompatActivity {\n\n    private TextView mRegister;\n    private EditText mUsername, mPassword;\n    private Button mLoginButton;\n    public String mUserStr, mPassStr;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        mRegister = (TextView)findViewById(R.id.register);\n        mUsername = (EditText)findViewById(R.id.input_email);\n        mPassword = (EditText)findViewById(R.id.input_password);\n        mLoginButton = (Button)findViewById(R.id.btn_login);\n\n        mRegister.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                startActivity(new Intent(MainActivity.this, \n                RegistrationActivity.class));\n            }\n        });\n\n        mLoginButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mUserStr = mUsername.getText().toString();\n                mPassStr = mPassword.getText().toString();\n\n                if(mUserStr.equals(\"\")){\n                    mUsername.setError(\"Please enter your username\");\n                }\n                else if(mPassStr.equals(\"\")){\n                    mPassword.setError(\"can't be blank\");\n                }\n                else{\n                    String url = \"https://packt-\n                    wear.firebaseio.com/users.json\";\n                    final ProgressDialog pd = new                 \n                    ProgressDialog(MainActivity.this);\n                    pd.setMessage(\"Loading...\");\n                    pd.show();\n\n                    StringRequest request = new StringRequest\n                    (Request.Method.GET, url, \n                    new Response.Listener<String>(){\n                        @Override\n                        public void onResponse(String s) {\n                            if(s.equals(\"null\")){\n                                Toast.makeText(MainActivity.this, \"user \n                                not found\", Toast.LENGTH_LONG).show();\n                            }\n                            else{\n                                try {\n                                    JSONObject obj = new JSONObject(s);\n\n                                    if(!obj.has(mUserStr)){\n\n                                    Toast.makeText(MainActivity.this, \n                                    \"user not found\", \n                                    Toast.LENGTH_LONG).show();\n                                    }\n                                    else if(obj.getJSONObject(mUserStr)\n                                    .getString(\"password\")\n                                    .equals(mPassStr)){\n                                        User.username = mUserStr;\n                                        User.password = mPassStr;\n                                        startActivity(new \n                                        Intent(MainActivity.this,    \n                                        UsersListActivity.class));\n                                    }\n                                    else {\n\n                                    Toast.makeText(MainActivity.this, \n                                    \"incorrect password\", \n                                    Toast.LENGTH_LONG).show();\n                                    }\n                                } catch (JSONException e) {\n                                    e.printStackTrace();\n                                }\n                            }\n\n                            pd.dismiss();\n                        }\n                    },new Response.ErrorListener(){\n                        @Override\n                        public void onErrorResponse(VolleyError \n                        volleyError) {\n                            System.out.println(\"\" + volleyError);\n                            pd.dismiss();\n                        }\n                    });\n\n                    RequestQueue rQueue = \n                    Volley.newRequestQueue(MainActivity.this);\n                    rQueue.add(request);\n                }\n            }\n        });\n\n    }\n}\n\n```", "```java\n//Instances \nprivate ListView mUsersList;\nprivate TextView mNoUsersText;\nprivate ArrayList<String> mArraylist = new ArrayList<>();\nprivate int totalUsers = 0;\nprivate ProgressDialog mProgressDialog;\n\n//inside onCreate method \nmUsersList = (ListView)findViewById(R.id.usersList);\nmNoUsersText = (TextView)findViewById(R.id.noUsersText);\nmProgressDialog = new ProgressDialog(UsersListActivity.this);\n\nmProgressDialog.setMessage(\"Loading...\");\nmProgressDialog.show();\n\n```", "```java\nString url = \"https://packt-wear.firebaseio.com/users.json\";\n    StringRequest request = new StringRequest(Request.Method.GET, url, \n    new Response.Listener<String>(){\n        @Override\n        public void onResponse(String s) {\n doOnSuccess(s);\n        }\n    },new Response.ErrorListener(){\n        @Override\n        public void onErrorResponse(VolleyError volleyError) {\n            System.out.println(\"\" + volleyError);\n        }\n    });\n\n    RequestQueue rQueue = \n    Volley.newRequestQueue(UsersListActivity.this);\n    rQueue.add(request);\n\n    mUsersList.setOnItemClickListener(new \n    AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView<?> parent, View view, int \n        position, long id) {\n            User.chatWith = mArraylist.get(position);\n            startActivity(new Intent(UsersListActivity.this, \n            ChatActivity.class));\n        }\n    });\n\n}\n\n```", "```java\npublic void doOnSuccess(String s){\n    try {\n        JSONObject obj = new JSONObject(s);\n\n        Iterator i = obj.keys();\n        String key = \"\";\n\n        while(i.hasNext()){\n            key = i.next().toString();\n\n            if(!key.equals(User.username)) {\n                mArraylist.add(key);\n            }\n\n            totalUsers++;\n        }\n\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n\n    if(totalUsers <=1){\n        mNoUsersText.setVisibility(View.VISIBLE);\n        mUsersList.setVisibility(View.GONE);\n    }\n    else{\n        mNoUsersText.setVisibility(View.GONE);\n        mUsersList.setVisibility(View.VISIBLE);\n        mUsersList.setAdapter(new ArrayAdapter<String>(this, \n        android.R.layout.simple_list_item_1, mArraylist));\n    }\n\n    mProgressDialog.dismiss();\n}\n\n```", "```java\npublic class UsersListActivity extends AppCompatActivity {\n\n    private ListView mUsersList;\n    private TextView mNoUsersText;\n    private ArrayList<String> mArraylist = new ArrayList<>();\n    private int totalUsers = 0;\n    private ProgressDialog mProgressDialog;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_users_list);\n        mUsersList = (ListView)findViewById(R.id.usersList);\n        mNoUsersText = (TextView)findViewById(R.id.noUsersText);\n\n        mProgressDialog = new ProgressDialog(UsersListActivity.this);\n        mProgressDialog.setMessage(\"Loading...\");\n        mProgressDialog.show();\n\n        String url = \"https://packt-wear.firebaseio.com/users.json\";\n        StringRequest request = new StringRequest(Request.Method.GET, \n        url, new Response.Listener<String>(){\n            @Override\n            public void onResponse(String s) {\n                doOnSuccess(s);\n            }\n        },new Response.ErrorListener(){\n            @Override\n            public void onErrorResponse(VolleyError volleyError) {\n                System.out.println(\"\" + volleyError);\n            }\n        });\n\n        RequestQueue rQueue = \n        Volley.newRequestQueue(UsersListActivity.this);\n        rQueue.add(request);\n\n        mUsersList.setOnItemClickListener(new \n        AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView<?> parent, View view, \n            int position, long id) {\n                User.chatWith = mArraylist.get(position);\n                startActivity(new Intent(UsersListActivity.this, \n                ChatActivity.class));\n            }\n        });\n\n    }\n\n    public void doOnSuccess(String s){\n        try {\n            JSONObject obj = new JSONObject(s);\n\n            Iterator i = obj.keys();\n            String key = \"\";\n\n            while(i.hasNext()){\n                key = i.next().toString();\n\n                if(!key.equals(User.username)) {\n                    mArraylist.add(key);\n                }\n\n                totalUsers++;\n            }\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n\n        if(totalUsers <=1){\n            mNoUsersText.setVisibility(View.VISIBLE);\n            mUsersList.setVisibility(View.GONE);\n        }\n        else{\n            mNoUsersText.setVisibility(View.GONE);\n            mUsersList.setVisibility(View.VISIBLE);\n            mUsersList.setAdapter(new ArrayAdapter<String>(this, \n            android.R.layout.simple_list_item_1, mArraylist));\n        }\n\n        mProgressDialog.dismiss();\n    }\n}\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <solid android:color=\"#dddddd\" />\n    <stroke\n        android:width=\"0dip\"\n        android:color=\"#dddddd\" />\n    <corners android:radius=\"10dip\" />\n    <padding\n        android:bottom=\"5dip\"\n        android:left=\"5dip\"\n        android:right=\"5dip\"\n        android:top=\"5dip\" />\n</shape>\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <solid android:color=\"#f0f0f0\" />\n    <stroke\n        android:width=\"0dip\"\n        android:color=\"#f0f0f0\" />\n    <corners android:radius=\"10dip\" />\n    <padding\n        android:bottom=\"5dip\"\n        android:left=\"5dip\"\n        android:right=\"5dip\"\n        android:top=\"5dip\" />\n</shape>\n\n```", "```java\n//Global instances\nLinearLayout mLinearlayout;\nImageView mSendButton;\nEditText mMessageArea;\nScrollView mScrollview;\nFirebase reference1, reference2;\n\n//inside onCreate method \nmLinearlayout = (LinearLayout)findViewById(R.id.layout1);\nmSendButton = (ImageView)findViewById(R.id.sendButton);\nmMessageArea = (EditText)findViewById(R.id.messageArea);\nmScrollview = (ScrollView)findViewById(R.id.scrollView);\n\nFirebase.setAndroidContext(this);\nreference1 = new Firebase(\"https://packt-wear.firebaseio.com/messages/\" + User.username + \"_\" + User.chatWith);\nreference2 = new Firebase(\"https://packt-wear.firebaseio.com/messages/\" + User.chatWith + \"_\" + User.username);\n\n```", "```java\nmSendButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        String messageText = mMessageArea.getText().toString();\n\n        if(!messageText.equals(\"\")){\n            Map<String, String> map = new HashMap<String, String>();\n            map.put(\"message\", messageText);\n map.put(\"user\", User.username);\n            reference1.push().setValue(map);\n reference2.push().setValue(map);\n        }\n    }\n});\n\n```", "```java\nreference1.addChildEventListener(new ChildEventListener() {\n    @Override\n    public void onChildAdded(DataSnapshot dataSnapshot, String s) {\n        Map map = dataSnapshot.getValue(Map.class);\n        String message = map.get(\"message\").toString();\n        String userName = map.get(\"user\").toString();\n\n        if(userName.equals(User.username)){\n addMessageBox(\"You:-\\n\" + message, 1);\n        }\n        else{\n addMessageBox(User.chatWith + \":-\\n\" + message, 2);\n        }\n    }\n\n    @Override\n    public void onChildChanged(DataSnapshot dataSnapshot, String s) {\n\n    }\n\n    @Override\n    public void onChildRemoved(DataSnapshot dataSnapshot) {\n\n    }\n\n    @Override\n    public void onChildMoved(DataSnapshot dataSnapshot, String s) {\n\n    }\n\n    @Override\n    public void onCancelled(FirebaseError firebaseError) {\n\n    }\n});\n\n```", "```java\npublic void addMessageBox(String message, int type){\nTextView textView = new TextView(ChatActivity.this);\ntextView.setText(message);\nLinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);\nlp.setMargins(0, 0, 0, 10);\ntextView.setLayoutParams(lp);\n\n    if(type == 1) {\ntextView.setBackgroundResource(R.drawable.rounded_corner1);\n}\n    else{\ntextView.setBackgroundResource(R.drawable.rounded_corner2);\n}\n\n    mLinearlayout.addView(textView);\n    mScrollview.fullScroll(View.FOCUS_DOWN);\n}\n\n```", "```java\npublic class ChatActivity extends AppCompatActivity {\n\n    LinearLayout mLinearlayout;\n    ImageView mSendButton;\n    EditText mMessageArea;\n    ScrollView mScrollview;\n    Firebase reference1, reference2;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_chat);\n\n        mLinearlayout = (LinearLayout)findViewById(R.id.layout1);\n        mSendButton = (ImageView)findViewById(R.id.sendButton);\n        mMessageArea = (EditText)findViewById(R.id.messageArea);\n        mScrollview = (ScrollView)findViewById(R.id.scrollView);\n\n        Firebase.setAndroidContext(this);\n        reference1 = new Firebase(\"https://packt-\n        wear.firebaseio.com/messages/\" + User.username + \"_\" + \n        User.chatWith);\n        reference2 = new Firebase(\"https://packt-  \n        wear.firebaseio.com/messages/\" + User.chatWith + \"_\" + \n        User.username);\n\n        mSendButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String messageText = mMessageArea.getText().toString();\n\n                if(!messageText.equals(\"\")){\n                    Map<String, String> map = new HashMap<String, \n                    String>();\n                    map.put(\"message\", messageText);\n                    map.put(\"user\", User.username);\n                    reference1.push().setValue(map);\n                    reference2.push().setValue(map);\n                }\n            }\n        });\n\n        reference1.addChildEventListener(new ChildEventListener() {\n            @Override\n            public void onChildAdded(DataSnapshot dataSnapshot, \n            String s) {\n                Map map = dataSnapshot.getValue(Map.class);\n                String message = map.get(\"message\").toString();\n                String userName = map.get(\"user\").toString();\n\n                if(userName.equals(User.username)){\n                    addMessageBox(\"You:-\\n\" + message, 1);\n                }\n                else{\n                    addMessageBox(User.chatWith + \":-\\n\" + message, 2);\n                }\n            }\n\n            @Override\n            public void onChildChanged(DataSnapshot dataSnapshot, \n            String s) {\n\n            }\n\n            @Override\n            public void onChildRemoved(DataSnapshot dataSnapshot) {\n\n            }\n\n            @Override\n            public void onChildMoved(DataSnapshot dataSnapshot, \n            String s) {\n\n            }\n\n            @Override\n            public void onCancelled(FirebaseError firebaseError) {\n\n            }\n        });\n    }\n\n    public void addMessageBox(String message, int type){\n        TextView textView = new TextView(ChatActivity.this);\n        textView.setText(message);\n        LinearLayout.LayoutParams lp = new LinearLayout\n        .LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, \n        ViewGroup.LayoutParams.WRAP_CONTENT);\n        lp.setMargins(0, 0, 0, 10);\n        textView.setLayoutParams(lp);\n\n        if(type == 1) {\n            textView.setBackgroundResource(R.drawable.rounded_corner1);\n        }\n        else{\n            textView.setBackgroundResource(R.drawable.rounded_corner2);\n        }\n\n        mLinearlayout.addView(textView);\n        mScrollview.fullScroll(View.FOCUS_DOWN);\n    }\n}\n\n```", "```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.wearable.view.BoxInsetLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.packt.smartchat.MainActivity\"\n    tools:deviceIds=\"wear\">\n\n    <LinearLayout\n        android:layout_gravity=\"center|center_horizontal\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\">\n\n        <TextView\n            android:id=\"@+id/text\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:gravity=\"center\"\n            android:text=\"Message\"\n            android:layout_margin=\"30dp\"\n            app:layout_box=\"all\" />\n\n        <EditText\n            android:id=\"@+id/message\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" />\n\n        <Button\n            android:id=\"@+id/send\"\n            android:layout_gravity=\"center\"\n            android:text=\"Send\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" />\n    </LinearLayout>\n\n</android.support.wearable.view.BoxInsetLayout>\n\n```", "```java\npublic class ListenerService extends WearableListenerService {\n\n    @Override\n    public void onMessageReceived(MessageEvent messageEvent) {\n\n        if (messageEvent.getPath().equals(\"/message_path\")) {\n            final String message = new String(messageEvent.getData());\n            Log.v(\"myTag\", \"Message path received on watch is: \" + \n            messageEvent.getPath());\n            Log.v(\"myTag\", \"Message received on watch is: \" + message);\n\n            // Broadcast message to wearable activity for display\n            Intent messageIntent = new Intent();\n            messageIntent.setAction(Intent.ACTION_SEND);\n            messageIntent.putExtra(\"message\", message);\n            LocalBroadcastManager\n            .getInstance(this).sendBroadcast(messageIntent);\n        }\n        else {\n            super.onMessageReceived(messageEvent);\n        }\n    }\n}\n\n```", "```java\n<application\n    android:allowBackup=\"true\"\n    android:icon=\"@mipmap/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:supportsRtl=\"true\"\n    android:theme=\"@android:style/Theme.DeviceDefault\">\n\n<activity...></activity>\n\n<service android:name=\".ListenerService\">\n <intent-filter>\n <action android:name=\"com.google.android.gms.wearable.DATA_CHANGED\" />\n <action \n android:name=\"com.google.android.gms.wearable.MESSAGE_RECEIVED\" />\n <data android:scheme=\"wear\" android:host=\"*\" \n android:pathPrefix=\"/message_path\" />\n </intent-filter>\n</service>\n\n</application>\n\n```", "```java\n <service android:name=\".ListenerService\">\n <intent-filter>\n <action android:name=\"com.google.android.gms.wearable.BIND_LISTENER\" />\n </intent-filter>\n </service>\n\n```", "```java\npublic class MainActivity extends WearableActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        setAmbientEnabled();\n\n    }\n}\n\n```", "```java\nmTextView = (TextView)findViewById(R.id.text);\nsend = (Button) findViewById(R.id.send);\nmessage = (EditText)findViewById(R.id.message);\n\n```", "```java\npublic class MainActivity extends WearableActivity implements GoogleApiClient.ConnectionCallbacks,\n        GoogleApiClient.OnConnectionFailedListener  {\n\n                 .......\n\n}\n\n```", "```java\npublic class MessageReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        String message = intent.getStringExtra(\"message\");\n        Log.v(\"packtchat\", \"Main activity received message: \" + \n        message);\n        // Display message in UI\n        mTextView.setText(message);\n    }\n}\n\n```", "```java\n// Register the local broadcast receiver\nIntentFilter messageFilter = new IntentFilter(Intent.ACTION_SEND);\nMessageReceiver messageReceiver = new MessageReceiver();\nLocalBroadcastManager.getInstance(this).registerReceiver(messageReceiver, messageFilter);\n\n```", "```java\nprivate Node mNode;\nprivate GoogleApiClient mGoogleApiClient;\nprivate static final String WEAR_PATH = \"/from-wear\";\n\n```", "```java\n//Initialize mGoogleApiClient\nmGoogleApiClient = new GoogleApiClient.Builder(this)\n        .addApi(Wearable.API)\n        .addConnectionCallbacks(this)\n        .addOnConnectionFailedListener(this)\n        .build();\n\n```", "```java\n@Override\npublic void onConnected(@Nullable Bundle bundle) {\n    Wearable.NodeApi.getConnectedNodes(mGoogleApiClient)\n            .setResultCallback(new \n            ResultCallback<NodeApi.GetConnectedNodesResult>() {\n                @Override\n                public void onResult(NodeApi.GetConnectedNodes\n                Result nodes) {\n                    for (Node node : nodes.getNodes()) {\n                        if (node != null && node.isNearby()) {\n                            mNode = node;\n                            Log.d(\"packtchat\", \"Connected to \" + \n                            mNode.getDisplayName());\n                        }\n                    }\n                    if (mNode == null) {\n                        Log.d(\"packtchat\", \"Not connected!\");\n                    }\n                }\n            });\n}\n\n```", "```java\nsend.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        mMsgStr = message.getText().toString();\n        sendMessage(mMsgStr);\n    }\n});\n\n```", "```java\nprivate void sendMessage(String city) {\n    if (mNode != null && mGoogleApiClient != null) {\n        Wearable.MessageApi.sendMessage(mGoogleApiClient, \n        mNode.getId(), WEAR_PATH, city.getBytes())\n                .setResultCallback(new \n                ResultCallback<MessageApi.SendMessageResult>() {\n                    @Override\n                    public void onResult(MessageApi.SendMessageResult \n                    sendMessageResult) {\n                        if (!sendMessageResult.getStatus().isSuccess()) \n                        {\n                            Log.d(\"packtchat\", \"Failed message: \" +\n\n                            sendMessageResult.getStatus()\n                            .getStatusCode());\n                        } else {\n                            Log.d(\"packtchat\", \"Message succeeded\");\n                        }\n                    }\n                });\n    }\n}\n\n```", "```java\n@Override\nprotected void onStart() {\n    super.onStart();\n    mGoogleApiClient.connect();\n}\n\n@Override\nprotected void onStop() {\n    super.onStop();\n    mGoogleApiClient.disconnect();\n}\n\n```", "```java\npublic class MainActivity extends WearableActivity implements GoogleApiClient.ConnectionCallbacks,\n        GoogleApiClient.OnConnectionFailedListener  {\n\n    private TextView mTextView;\n    Button send;\n    EditText message;\n    String mMsgStr;\n\n    private Node mNode;\n    private GoogleApiClient mGoogleApiClient;\n    private static final String WEAR_PATH = \"/from-wear\";\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        mTextView = (TextView)findViewById(R.id.text);\n        send = (Button) findViewById(R.id.send);\n        message = (EditText)findViewById(R.id.message);\n        setAmbientEnabled();\n\n        //Initialize mGoogleApiClient\n        mGoogleApiClient = new GoogleApiClient.Builder(this)\n                .addApi(Wearable.API)\n                .addConnectionCallbacks(this)\n                .addOnConnectionFailedListener(this)\n                .build();\n\n        // Register the local broadcast receiver\n        IntentFilter messageFilter = new \n        IntentFilter(Intent.ACTION_SEND);\n        MessageReceiver messageReceiver = new MessageReceiver();\n        LocalBroadcastManager.getInstance(this)\n        .registerReceiver(messageReceiver, messageFilter);\n\n        send.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mMsgStr = message.getText().toString();\n                sendMessage(mMsgStr);\n            }\n        });\n\n    }\n\n    private void sendMessage(String message) {\n        if (mNode != null && mGoogleApiClient != null) {\n            Wearable.MessageApi.sendMessage(mGoogleApiClient, \n            mNode.getId(), WEAR_PATH, message.getBytes())\n                    .setResultCallback(new \n                    ResultCallback<MessageApi.SendMessageResult>() {\n                        @Override\n                        public void onResult(MessageApi\n                        .SendMessageResult sendMessageResult) {\n                            if (!sendMessageResult.getStatus()\n                            .isSuccess()) {\n                                Log.d(\"packtchat\", \"Failed message: \" +\n\n                                sendMessageResult.getStatus()\n                                .getStatusCode());\n                            } else {\n                                Log.d(\"packtchat\", \"Message \n                                succeeded\");\n                            }\n                        }\n                    });\n        }\n    }\n\n    public class MessageReceiver extends BroadcastReceiver {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            String message = intent.getStringExtra(\"message\");\n            Log.v(\"packtchat\", \"Main activity received message: \" + \n            message);\n            // Display message in UI\n            mTextView.setText(message);\n\n        }\n    }\n\n    @Override\n    public void onConnected(@Nullable Bundle bundle) {\n        Wearable.NodeApi.getConnectedNodes(mGoogleApiClient)\n                .setResultCallback(new \n                 ResultCallback<NodeApi.GetConnectedNodesResult>() {\n                    @Override\n                    public void \n                    onResult(NodeApi.GetConnectedNodesResult nodes) {\n                        for (Node node : nodes.getNodes()) {\n                            if (node != null && node.isNearby()) {\n                                mNode = node;\n                                Log.d(\"packtchat\", \"Connected to \" + \n                                mNode.getDisplayName());\n                            }\n                        }\n                        if (mNode == null) {\n                            Log.d(\"packtchat\", \"Not connected!\");\n                        }\n                    }\n                });\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        mGoogleApiClient.connect();\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        mGoogleApiClient.disconnect();\n    }\n\n    @Override\n    public void onConnectionSuspended(int i) {\n\n    }\n\n    @Override\n    public void onConnectionFailed(@NonNull ConnectionResult \n    connectionResult) {\n\n    }\n}\n\n```", "```java\npublic class WearListner extends WearableListenerService {\n\n    @Override\n    public void onMessageReceived(MessageEvent messageEvent) {\n        if (messageEvent.getPath().equals(\"/from-wear\")) {\n            final String message = new String(messageEvent.getData());\n            Log.v(\"pactchat\", \"Message path received on watch is: \" + \n            messageEvent.getPath());\n            Log.v(\"packtchat\", \"Message received on watch is: \" + \n            message);\n\n            // Broadcast message to wearable activity for display\n            Intent messageIntent = new Intent();\n            messageIntent.setAction(Intent.ACTION_SEND);\n            messageIntent.putExtra(\"message\", message);\n            LocalBroadcastManager\n            .getInstance(this).sendBroadcast(messageIntent);\n        }\n        else {\n            super.onMessageReceived(messageEvent);\n        }\n    }\n}\n\n```", "```java\n<service android:name=\".WearListner\">\n    <intent-filter>\n        <action \n        android:name=\"com.google.android.gms.wearable.DATA_CHANGED\" />\n        <action \n        android:name=\"com.google.android.gms.wearable.MESSAGE_RECEIVED\" \n        />\n        <data android:scheme=\"wear\" android:host=\"*\" android:pathPrefix=\"/from-wear\" />\n    </intent-filter>\n</service>\n\n```", "```java\npublic class ChatActivity extends AppCompatActivity implements\n        GoogleApiClient.ConnectionCallbacks,\n        GoogleApiClient.OnConnectionFailedListener {\n...\n}\n\n```", "```java\ngoogleClient = new GoogleApiClient.Builder(this)\n        .addApi(Wearable.API)\n        .addConnectionCallbacks(this)\n        .addOnConnectionFailedListener(this)\n        .build();\n\n```", "```java\npublic class MessageReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        String message = intent.getStringExtra(\"message\");\n        Log.v(\"myTag\", \"Main activity received message: \" + message);\n        // Displaysage in UI\n        addMessageBox(\"You:-\\n\" + message, 1);\n        if(!message.equals(\"\")){\n            Map<String, String> map = new HashMap<String, String>();\n            map.put(\"message\", message);\n            map.put(\"user\", User.username);\n            reference1.push().setValue(map);\n        }\n        new SendToDataLayerThread(\"/message_path\",\"You:-\\n\" + \n        message).start();\n    }\n}\n\n```", "```java\n// Register the local broadcast receiver\nIntentFilter messageFilter = new IntentFilter(Intent.ACTION_SEND);\nMessageReceiver messageReceiver = new MessageReceiver();\nLocalBroadcastManager.getInstance(this).registerReceiver(messageReceiver, messageFilter);\n\n```", "```java\nclass SendToDataLayerThread extends Thread {\n    String path;\n    String message;\n\n    // Constructor to send a message to the data layer\n    SendToDataLayerThread(String p, String msg) {\n        path = p;\n        message = msg;\n    }\n\n    public void run() {\n        NodeApi.GetConnectedNodesResult nodes = \n        Wearable.NodeApi.getConnectedNodes(googleClient).await();\n        for (Node node : nodes.getNodes()) {\n            MessageApi.SendMessageResult result = Wearable.MessageApi\n           .sendMessage(googleClient, node.getId(), path, \n           message.getBytes()).await();\n            if (result.getStatus().isSuccess()) {\n                Log.v(\"myTag\", \"Message: {\" + message + \"} sent to: \" + \n                node.getDisplayName());\n            } else {\n                // Log an error\n                Log.v(\"myTag\", \"ERROR: failed to send Message\");\n            }\n        }\n    }\n}\n\n```", "```java\n@Override\npublic void onConnected(@Nullable Bundle bundle) {\n    String message = \"Conected\";\n    //Requires a new thread to avoid blocking the UI\n    new SendToDataLayerThread(\"/message_path\", message).start();\n}\n\n```", "```java\nreference1.addChildEventListener(new ChildEventListener() {\n    @Override\n    public void onChildAdded(DataSnapshot dataSnapshot, String s) {\n        Map map = dataSnapshot.getValue(Map.class);\n        String message = map.get(\"message\").toString();\n        String userName = map.get(\"user\").toString();\n        mMessageArea.setText(\"\");\n        if(userName.equals(User.username)){\n            addMessageBox(\"You:-\\n\" + message, 1);\n            new SendToDataLayerThread(\"/message_path\",\"You:-\\n\" + \n            message).start();\n\n        }\n        else{\n            addMessageBox(User.chatWith + \":-\\n\" + message, 2);\n            new SendToDataLayerThread(\"/message_path\", User.chatWith + \n            \":-\\n\" + message).start();\n\n        }\n    }\n\n```", "```java\n@Override\nprotected void onStart() {\n    super.onStart();\n    googleClient.connect();\n}\n\n@Override\nprotected void onStop() {\n    if (null != googleClient && googleClient.isConnected()) {\n        googleClient.disconnect();\n    }\n    super.onStop();\n}\n\n```"]