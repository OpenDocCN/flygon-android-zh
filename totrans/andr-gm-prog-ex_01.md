# 第一章。玩家 1 UP

老式街机和弹球机使用的术语“1 UP”是一种通知玩家他们正在（继续）游戏的提示。它还用来表示获得额外生命。你准备好构建三个伟大的游戏了吗？

我们将一起构建三个很酷的游戏。这本书中展示了这三个游戏每一行代码；你无需参考代码文件就能了解正在发生什么。此外，构建这三个游戏所需的所有文件都可以在 Packt 网站上的书籍页面下载捆绑包中获得。

下载内容还包括所有代码、Android 清单文件以及图形和音频资源。这三个酷游戏实现难度逐渐增加。

第一个项目使用了一个简单但功能性的游戏引擎，清晰地展示了主游戏循环的基本要素。游戏将包括主屏幕、高分记录、声音和动画，并且完全可玩。但到项目结束时，随着我们添加功能和尝试平衡游戏玩法，我们会很快发现我们需要更多的灵活性来添加功能。

在第二个项目中，一个硬派复古平台游戏，我们将看到如何使用简单灵活的设计构建一个相对快速且非常灵活的游戏引擎，它是可扩展和可重用的。这种灵活性将允许我们制作相当复杂且功能丰富的游戏。这个游戏将包含多个关卡、不同的环境等等。这进而突出了快速绘制图形的需要。这引导我们进入第三个项目。

在第三个项目中，我们将构建一个类似《小行星》的游戏，称为**小行星模拟器**。尽管这个游戏没有前一个项目那么多功能，但它能以每秒 60 帧以上的速度绘制数百个动画游戏对象，实现超平滑的视觉效果。我们将通过学习和使用**嵌入式系统开放图形库**（**OpenGL ES 2**）来实现这一点。

到本书结束时，你将拥有一整套可以在未来游戏中使用的设计理念、技术和代码模板。通过了解在 Android 上制作游戏的多种方式的优缺点，你将能够以最适合你下一个大型游戏的方式来成功设计和构建游戏。

# 更近距离地观察游戏

这里快速预览一下三个项目。

## 点击防御游戏（Tappy Defender）

用一根手指像玩《飞扬的小鸟》一样飞向你的家园星球，同时避开多个敌人。特点包括：

+   基本动画

+   主屏幕![点击防御游戏](img/B04322_01_01.jpg)

+   碰撞检测

+   高分记录

+   简单的 HUD 界面

+   单指触摸屏控制![点击防御游戏](img/B04322_01_01b.jpg)

## 硬派复古平台游戏

这是一个真正难以击败的复古风格平台游戏。我们必须引导鲍勃从地下火洞穿过城市、森林，最终到达山脉。它有四个具有挑战性的关卡。特点包括：

+   一个更先进、更灵活的游戏引擎

+   更先进的“精灵表”角色动画

+   一个关卡构建引擎，可以用文本格式设计你的关卡

+   多个滚动视差背景

+   关卡之间的过渡

+   一个更先进的 HUD![艰难的复古平台游戏](img/B04322_01_02.jpg)

+   添加大量多样化的额外关卡

+   声音管理器，轻松管理音效

+   拾取物品

+   可升级的枪械

+   寻找并摧毁敌方无人机

+   为巡逻的敌人守卫编写简单的 AI 脚本

+   像火坑这样的危险物品

+   添加场景对象以营造氛围![艰难的复古平台游戏](img/B04322_01_02b.jpg)

## 小行星模拟器

这是一个经典的射击游戏，具有复古的矢量图形风格视觉效果。它包括清除一系列平滑旋转的小行星，使用快速射击枪。功能包括：

+   即使在旧硬件上也能达到每秒 60 帧或更好的效果

+   初识 OpenGL ES 2

+   难度逐渐增加的射击波次

+   先进的多阶段碰撞检测![小行星模拟器](img/B04322_01_03.jpg)

# 设置你的开发环境

本书中的所有代码和下载包都可以在你喜欢的 Android IDE 中运行。然而，我发现最新版本的 Android Studio 特别易于使用，而且代码也是在其中编写和测试的。

如果你目前还没有使用 Android Studio，我建议你尝试一下。以下是如何快速上手的一个简要概述。本指南包括安装 Java JDK 的步骤，以防你完全不了解 Android 开发。

### 提示

如果你已经准备好你喜欢的开发环境，那么可以直接跳到第二章，*Tappy Defender – 第一步*。

我们需要做的第一件事是准备你的电脑，以便使用 Java 进行 Android 开发。幸运的是，这一步对我们来说很简单。

### 提示

如果你是在 Mac 或 Linux 上学习，本书中的内容仍然适用。接下来的两个教程包含 Windows 特定的指令和截图。然而，稍作调整应该也不难适应 Mac 或 Linux。

我们需要做的是：

1.  安装**Java 开发工具包**（**JDK**），它允许我们用 Java 进行开发。

1.  然后安装 Android Studio，以快速轻松地进行 Android 开发。Android Studio 使用 JDK 和一些其他特定于 Android 的工具，安装 Android Studio 时会自动安装这些工具。

## 安装 JDK

我们需要做的第一件事是获取 JDK 的最新版本。要完成本指南，请执行以下操作：

1.  我们需要访问 Java 网站，所以请访问：[`www.oracle.com/technetwork/java/javase/downloads/index.html`](http://www.oracle.com/technetwork/java/javase/downloads/index.html)。

1.  找到这里显示的三个按钮，并点击标记为**JDK**的那个，如下图所示，它位于网页的右侧。然后，在**JDK**选项下点击**下载**按钮：![安装 JDK](img/B04322_01_04.jpg)

1.  你将被带到有多个选项下载 JDK 的页面。在**产品/文件描述**列中，你需要点击与你的操作系统相匹配的选项。Windows、Mac、Linux 以及一些不太常见的选项都被列出来了。

1.  在这里经常被问到的一个问题是，我的系统是 32 位还是 64 位的？要找出答案，请右键点击**我的电脑**图标（Windows 8 中为**此电脑**），点击**属性**选项，在**系统**标题下查看**系统类型**条目：![安装 JDK](img/B04322_01_05.jpg)

1.  点击稍微隐藏的**接受许可协议**复选框：![安装 JDK](img/B04322_01_06.jpg)

1.  现在，点击**为你的操作系统下载**并按照之前确定的类型输入。等待下载完成。

1.  在你的`下载`文件夹中，双击你刚刚下载的文件。在撰写本文时，64 位 Windows 电脑的最新版本是`jdk-8u5-windows-x64`。如果你使用的是 Mac/Linux 或拥有 32 位操作系统，你的文件名会有相应的变化。

1.  在一系列安装对话框中的第一个里，点击**下一步**按钮，你会看到以下对话框：![安装 JDK](img/B04322_01_07.jpg)

1.  通过点击**下一步**接受上张图片中显示的默认设置。在下一个对话框中，你可以通过点击**下一步**接受默认的安装位置。

1.  接下来是 Java 安装程序的最后一个对话框；对于这个，点击**关闭**。

    ### 注意

    现在 JDK 已经安装完毕。接下来，我们将确保 Android Studio 能够使用 JDK。

1.  右键点击你的**我的电脑**图标（Windows 8 中为**此电脑**），然后点击**属性** | **高级系统设置** | **环境变量...** | **新建...**（位于**系统变量**下，而不是**用户变量**下）。现在，你可以看到**新建系统变量**对话框：![安装 JDK](img/B04322_01_08.jpg)

1.  在**变量名：**处输入`JAVA_HOME`，并在**变量值：**字段中输入`C:\Program Files\Java\jdk1.8.0_05`。如果你在其他位置安装了 JDK，那么在**变量值：**字段中输入的文件路径需要指向你安装 JDK 的位置。你输入的确切文件路径可能有所不同，以匹配你下载时最新的 Java 版本。

1.  点击**确定**以保存你的新设置。

1.  现在，在**系统变量**下，点击**Path**，然后点击**编辑...**按钮。在**变量值：**字段文本的最后，输入以下文本以将我们的新变量添加到 Windows 将要使用的文件路径中，`;JAVA_HOME`。确保不要漏掉前面的分号。

1.  点击**确定**以保存更新后的**Path**变量。

1.  现在，再次点击**确定**以清除**高级系统设置**对话框。

现在 JDK 已经安装在我们的电脑上。

## 安装 Android Studio

不必拖延，让我们立即安装 Android Studio，然后我们可以开始第一个游戏项目。访问：

[`developer.android.com/sdk/index.html`](https://developer.android.com/sdk/index.html)

1.  点击标记为**DOWNLOAD ANDROID STUDIO FOR WINDOWS**的按钮开始下载 Android Studio。这将带您进入另一个看起来与刚才点击的按钮非常相似的网页。

1.  通过选中复选框接受许可协议，然后点击标记为**DOWNLOAD ANDROID STUDIO FOR WINDOWS**的按钮开始下载，并等待下载完成。

1.  在您刚刚下载 Android Studio 的文件夹中，右键点击`android-studio-bundle-135.12465-windows.exe`文件，并选择**以管理员身份运行**。文件名的末尾会根据您所安装的 Android Studio 版本和操作系统而有所不同。

1.  当系统询问您是否允许来自未知发布者的以下程序对您的计算机进行更改时，请点击**是**。在下一个屏幕上，点击**下一步**。

1.  在这里显示的屏幕上，您可以选择您的电脑上的哪些用户可以使用 Android Studio。选择适合您的选项，因为所有选项都可以正常工作，然后点击**下一步**：![安装 Android Studio](img/B04322_01_09.jpg)

1.  在下一个对话框中，保留默认设置，然后点击**下一步**。

1.  在**选择开始菜单文件夹**对话框中保留默认设置，然后点击**安装**。

1.  在安装完成的对话框上，点击**完成**以首次运行 Android Studio。

1.  下一个对话框是为已经使用过 Android Studio 的用户准备的，因此假设您是第一次使用，请选择**我没有之前的 Android Studio 版本，或者我不想导入我的设置**复选框。然后点击**确定**：![安装 Android Studio](img/B04322_01_10.jpg)

这是我们需要安装的最后一个软件。在下一章中，我们将立即开始使用 Android Studio。

# 总结

本章故意保持尽可能简短，以便我们可以开始构建一些游戏。我们现在就开始。
