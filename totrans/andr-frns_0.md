# 第一章

# 安卓和移动取证

### 本章信息

• 安卓平台

• Linux、开源软件和取证

• 安卓开源项目

• 国际化

• 安卓市场

• 安卓取证

## 引言

数字取证是一个激动人心、发展迅速的领域，可以在各种情况下产生强烈影响，包括内部企业调查、民事诉讼、刑事调查、情报收集以及涉及国家安全的事务。移动取证无疑是发展最快、变化最大的数字取证学科，提供了大量的机会以及挑战。虽然安卓取证有趣的部分涉及从设备获取和分析数据，但重要的是要广泛了解平台和调查中将要使用的工具。深入的了解将帮助取证检查员或安全工程师成功调查和分析安卓设备。

小贴士

### 书籍更正、更新和软件

本书的所有更正、更新以及软件样本都将在线维护，具体页面如下：

[`viaforensics.com/education/android-forensics-mobile-security-book/`](http://viaforensics.com/education/android-forensics-mobile-security-book/)

请定期访问该网站，随着时间的推移，它会不断演进，为读者提供重要且日益增加的价值。除了更正和更新之外，书中提到的部分软件将可供下载。

## 安卓平台

安卓是一个基于 Linux 2.6 内核的开源移动设备平台，由开放手持设备联盟管理，该联盟由运营商、移动设备和组件制造商以及软件供应商组成。

安卓在智能手机市场产生了重大影响，因此在取证领域也产生了影响。第一款安卓设备推出两年一个月后（2008 年 10 月），安卓成为第二大智能手机平台，占据了 6150 万美国智能手机订阅用户的 26.0%（comScore 报告，未标明日期）。表 1.1 显示了根据 comScore 公司 2010 年 11 月的顶级智能手机平台。

表 1.1 2010 年 11 月美国智能手机订阅用户总数（13 岁以上）

| 平台 | 智能手机订阅用户的份额（%） |
| --- | --- |
| RIM | 33.5% |
| 谷歌 | 26.0% |
| 苹果 | 25.0% |
| 微软 | 9.0% |
| 棕榈 | 3.9% |

但安卓的影响力远远超出了美国市场。根据 Gartner 公司的数据，2010 年第三季度，安卓操作系统（OS）是第二大受欢迎的操作系统，占全球智能手机销量的 25.5%（Gartner 表示，未标明日期），如表 1.2 所示。

表 1.2 2009-2010 年第三季度全球按操作系统划分的终端用户智能手机销售量（以千为单位）

![图像](img/T100019tabT0015.jpg)

根据谷歌投资者网站，谷歌 CEO 埃里克·施密特报告称，截至 2011 年 2 月，每天有超过 35 万台安卓设备被激活（谷歌投资者，未标明日期）。这些统计数据关注的是智能手机市场，而智能手机市场只是市场上众多安卓设备类型中的一种。

安卓的开源性质不仅为行业确立了新的方向，而且使开发者、懂代码的法医分析师，以及（不幸的是）高级犯罪分子能够在最基础的层面上理解设备。随着核心平台的快速成熟并继续免费提供，运营商和硬件供应商都可以将精力集中在旨在保留客户的定制化工作上。

### 安卓的历史

三十多年来，公司投入了大量资源研发手持计算设备，希望它们能开辟新市场。与传统计算机一样，构建这些设备的核心硬件组件已经取得了显著进步，现在提供了一个虽小但强大的移动平台，用于手持计算机。

安卓开发的核心人物是安迪·鲁宾，他的前雇主包括机器人公司、苹果、WebTV 和 Danger Inc.。他的前公司 Danger Inc.开发了一款智能手机及其支持操作系统，最为人熟知的是 T-Mobile Sidekick。这个移动操作系统 DangerOS 是用 Java 构建的。它提供了一个软件开发工具包，并具有当前智能手机的一些功能。2004 年，鲁宾离开 Danger 公司，开始着手几个新想法。他再次回到智能手机开发领域，并与前公司的几位工程师合作。鲁宾于 2003 年成立的公司名为 Android, Inc.

在团队开始开发时，鲁宾积极向潜在投资者和无线运营商推广安卓系统。他接触的公司之一就是谷歌，随后谷歌在 2005 年 7 月收购了安卓。这次收购，结合涉及移动的新专利和服务，以及大额的无线频谱竞标，引发了人们猜测谷歌正在开发自己的智能手机，甚至可能目标是成为全面的无线运营商。

然而，在 2007 年 11 月 5 日，安迪·鲁宾在谷歌官方博客上宣布了一个更为雄心勃勃的计划（官方谷歌博客，未标明日期）：

Android 是第一个真正开放且全面的移动设备平台。它包括操作系统、用户界面和应用程序——所有运行移动电话所需的软件，但没有阻碍移动创新的专有障碍。我们与开放手机联盟合作开发了 Android，该联盟由包括摩托罗拉、高通、HTC 和 T-Mobile 在内的 30 多家技术和移动领导者组成。通过与运营商、设备制造商、开发人员和其他方面的深入合作，我们希望创建一个标准的、开放的移动软件平台，为移动世界启用一个开放生态系统。我们认为，最终结果将是一个更好、更快的创新步伐，为移动客户带来前所未有的应用程序和能力。

一周后，谷歌向开发者发布了一个早期的 Android 软件开发工具包（SDK）预览。这使得谷歌能够从 2008 年 1 月至 2008 年 4 月举办第一届 Android 开发者挑战赛。谷歌预留了 100 万美元奖励最具创新性的 Android 应用。前 50 个应用可以在[`code.google.com/android/adc/adc_gallery/`](http://code.google.com/android/adc/adc_gallery/)进行查看。

2008 年 8 月，谷歌宣布推出 Android 市场，开发者可以在那里上传他们的应用，供移动设备所有者浏览和安装。最初的版本不支持付费应用。然而，在 2009 年初增加了这个功能。最后，2008 年 10 月标志着 Android 开源项目（AOSP）的正式发布(Bort, n.d.)以及首款公开可用的 Android 智能手机，T-Mobile G1 的发布。

自成立以来，Android 生态系统已经显著增长，并包含了多样化的贡献者群体。表 1.3 总结了 Android 平台的重要里程碑。

表 1.3 Android 里程碑

| 日期 | 事件 |
| --- | --- |
| 2005 年 7 月 1 日 | 谷歌收购了 Android 公司 |
| 2007 年 11 月 12 日 | Android 发布 |
| 2008 年 8 月 28 日 | 宣布了 Android 市场 |
| 2008 年 9 月 23 日 | 发布了 Android 1.0 平台 |
| 2008 年 10 月 21 日 | Android 作为开源软件发布 |
| 2009 年 2 月 13 日 | Android 市场：美国接受付费应用 |
| 2009 年 3 月 12 日 | Android 市场：英国接受付费应用 |
| 2009 年 4 月 15 日 | 发布了 Android 1.5（纸杯蛋糕）平台 |
| 2009 年 9 月 16 日 | 发布了 Android 1.6（甜甜圈）平台 |
| 2009 年 10 月 5 日 | 发布了 Android 2.0/2.1（闪电泡芙）平台 |
| 2010 年 5 月 20 日 | 发布了 Android 2.2（冻酸奶）平台 |
| 2010 年 5 月 23 日 | 发布了适用于 Nexus One 手机的 Android 2.2 |
| 2010 年 12 月 6 日 | 发布了 Android 2.3（姜饼）平台 |
| 2011 年 2 月 2 日 | 发布了 Android 3.0（蜂巢）预览版 |

#### 开放手机联盟

开放手机联盟（OHA）是由移动技术公司组成的合作组织，包括无线运营商、手机和组件制造商、软件开发者以及其他支持和集成公司。该联盟成立于 2007 年 11 月 5 日，最初有 34 个成员。然而，到了 2011 年 1 月，成员数量已接近 80 个。

OHA 承诺“加快移动领域的创新，并为消费者提供更丰富、更便宜、更好的移动体验”（[联盟常见问题解答，不详]）的主要焦点是协调、开发和发布 Android 设备。谷歌是 OHA 和 AOSP 背后的推动力。有些人抱怨说，这个联盟只是一种营销手段，对成员或消费者几乎没有价值。然而，在 2010 年，新成员不断加入，OHA 无疑将在未来继续发展。截至 2011 年 2 月 3 日，表 1.4 中列出的成员按移动运营商、手机制造商、半导体公司、软件公司和商业化公司分类（[联盟成员，不详]）。

表 1.4 开放手机联盟成员

![图像](img/T100019tabT0025.jpg)

![图像](img/T100019tabT0025a.jpg)

#### Android 功能特性

尽管我们在下一章中会更深入地探讨各种 Android 设备类型，但这里我们可以讨论大多数 Android 设备共有的几个特性。

首先，Android 从一开始就被设计为可以在线使用，无论是通过全球移动通信系统/码分多址（GSM/CDMA）这样的蜂窝网络，还是无线网络（Wi-Fi）。无论在何种场合，能够保持在线是任何 Android 设备的核心功能。实际上，许多设备都是智能手机，因此支持发送和接收电话、短信以及蜂窝网络上其他的服务。与设备的交互通常是通过触摸屏完成的，但许多设备也允许使用键盘或其他按钮，以便支持用户交互。

Android 设备的第二个核心功能是能够从 Android Market 下载并安装应用程序（app）。这对于许多用户来说是一个主要功能，因为它允许他们扩展设备的功能性。这些应用程序通常也是法医分析师丰富的信息来源。

最后一个核心功能是用户能够在设备上存储他们的数据。这当然是本书详细介绍的取证工作的基础。大多数 Android 设备都配备了一些使用闪存（NAND）内存的设备内存储，以及一个可移动的外部 SD 卡，用于存储更大的数据量。一些近期推出的 HTC 设备现在配备了模拟 SD 卡，这是一个单独的 USB 设备 ID，映射到 NAND，并呈现为 SD 卡。模拟 SD 卡通常使用微软的 FAT32 文件系统格式化。

#### 支持的蜂窝网络

由于智能手机是安卓设备中最大的类别，因此了解安卓目前支持的多种蜂窝技术至关重要。

第一款安卓设备，HTC DREA100 或 T-Mobile G1，是一款全球移动通信系统（Global System for Mobile Communications，简称 GSM）的手机。GSM 是使用最广泛、支持最全面的蜂窝系统，在全球范围内都有很好的支持。在美国支持 GSM 的主要无线提供商包括 AT&T 和 T-Mobile。GSM 系统利用订阅者身份模块（SIM）或通用订阅者身份模块（USIM）来向蜂窝网络识别用户。

安卓支持的下一个蜂窝系统是码分多址（Code Division Multiple Access，简称 CDMA）。CDMA 是用于编码和发送 CDMA 手机使用的语音、数据和控制信号的技术。它在美国很受欢迎，但在世界范围内就不那么受欢迎了。在美国，主要使用的技术标准称为 CDMA2000。主要运营商包括 Verizon Wireless、Sprint、U.S. Cellular 和 Cricket Communications。

安卓支持的最后一个蜂窝系统是集成数字增强网络（Integrated Digital Enhanced Network，简称 iDEN），其主要的吸引力在于支持流行的对讲（push-to-talk，简称 PTT）功能。在美国，唯一支持 iDEN 的大型运营商是 Sprint Nextel（他们也拥有 Boost Mobile）。iDEN 的开发者摩托罗拉还开发了首款支持 iDEN 的安卓手机，摩托罗拉 i1。

### 谷歌的策略

安卓显然是一个强大的移动设备平台，其开发成本非常高昂。那么为什么谷歌要免费提供安卓呢？

这个问题的答案始于谷歌明确规定的使命 (企业信息：关于，n.d.)：

谷歌的使命是组织世界的信息，使其普遍可访问并有用。

手机是最受欢迎的消费品，数量超过 40 亿部。因此，通过免费提供先进的移动技术栈，谷歌认为他们正在实现使命中普遍可访问的部分。但是，显然谷歌还是必须从中获得一些好处。当更多的人上网，更多的人使用搜索，这最终会推动广告收入——这是谷歌主要的收入来源。在 2009 年 3 月的采访中，安迪·鲁宾解释说：

谷歌围绕广告有着很好的商业模式，开源与广告商业模式之间有着自然的联系。开源基本上是一种分销策略，它完全消除了采用的入门障碍。

(Krazit, n.d.)

对 Android 的一项批评是，现在市场非常分散，有不同版本和变种的 Android，这是谷歌向制造商发布 Android 的直接结果。这与其他设备，如 iPhone 形成对比，苹果对硬件和操作系统拥有完全控制权，并对第三方应用程序产生重大影响。然而，鲁宾为这一模式辩护。在同一个采访中，鲁宾进一步评论了这一方面（Krazit, n.d.）：

控制整个设备固然很好，（但是）我们要谈论的是 40 亿部手机。当你控制整个设备时，来自单一供应商的快速创新能力是相当有限的。你可以有创新的高峰。你可以在企业市场、某些界面技术或者手机上网业务方面取得成功，但你不能面面俱到。你总是会处于某个细分市场。我们所说的是走出一个细分市场，让人们以他们期望的方式访问互联网。我不想创造互联网的某种衍生物，我不想仅仅拿走互联网的一小部分，我不想在某个角落里用简化版的互联网，我想在真正的互联网上。

因此，通过创建一个既满足消费者需求又满足制造商和无线运营商需求的移动操作系统，谷歌为其盈利的搜索和广告业务提供了一个优秀的分发平台。

#### 应用程序

Android 超越核心移动技术堆栈支持创新的一个重要方式，是允许第三方应用在 Android 上的开发和分发。截至 2011 年 1 月，已有超过 20 万个 Android 应用被开发出来。这当然与苹果的策略相似。然而，它们的做法有一些关键的区别。苹果对其应用商店保持着严格的控制，要求开发者提交到一个有时颇为漫长的审查过程，并由苹果最终批准应用。应用可能会因为多种标准而被拒绝，尤其是如果它们包含任何苹果认为令人反感的内容。另一方面，谷歌在 Android Market 发布应用时几乎不需要审查。尽管谷歌有能力禁止开发者、从 Android Market 移除应用，甚至远程从 Android 设备卸载应用，但总的来说，他们对应用管理的做法是不过多干预的。

#### Nexus 手机

2010 年 1 月，谷歌发布了自家智能手机，即图 1.1 所示的 Nexus One (N1)。N1 由 HTC 开发，在所有方面，它都是制造商应该如何开发手机的一个理想模型。处理器非常快（1 GHz），运行最新版本的 Android，并且有创新之处，如三个麦克风，用于监测背景噪音并将你的声音融合，以创造尽可能清晰的对话。

![图像](img/F100019f01-01-9781597496513.jpg)

图 1.1 由 HTC 制造的谷歌 Nexus One。

N1 由谷歌直接销售，且为解锁状态——许多分析师认为这是对运营商锁定模式的直接挑战，在这种模式下，客户必须签署为期两年的协议才能在设备上获得折扣。N1 也可以通过 T-Mobile 以较低价格获得，前提是用户签署长期合同。最终，N1 的销售并不令人印象深刻，有猜测认为谷歌在实施上失败了（图 1.1）。

然而，当时谷歌也在尝试展示他们认为安卓手机应该如何发布和维护。令许多人惊讶的是，一年后谷歌发布了由三星制造的 Nexus S，如图 1.2 所示。Nexus S 一个有趣的功能是它运行的是 Android 2.3 系统，允许使用 VoIP（语音通话）的本地功能。如果设备有数据连接，无论是[Wi-Fi.com](http://Wi-Fi.com)还是其他网络，那么它可以使用众多流行的 VoIP 服务来发送和接收电话。在美国，这部手机只在 Best Buy 商店销售，并通过 T-Mobile 提供服务（图 1.2）。

![图像](img/F100019f01-02-9781597496513.jpg)

图 1.2 由三星制造的谷歌 Nexus S。

目前尚不清楚谷歌推出 Nexus 系列智能手机的总体目标是什么。然而，很明显他们打算发布谷歌品牌的手机，并最终可能会为消费者提供购买和使用智能手机的新灵活性。

## Linux、开源软件和取证

开源软件对数字取证领域产生了巨大影响。作为免费开源软件发布的取证工具比闭源解决方案具有巨大优势，包括以下方面：

• 审查源代码并了解确切步骤的能力

• 改进软件并将增强功能与整个社区共享的能力

• 价格

尽管许多免费的开源软件包不提供商业支持模式，但一些公司专门提供支持服务。例如，红帽公司建立了提供 Linux 操作系统支持和服务的重要业务。此外，许多免费开源软件包的维护者通常非常易于接触并对询问作出响应，并且由于他们直接维护软件，通常可以提供更优质的支持。

最重要和典型的免费开源软件就是 Linux 操作系统。Linux 不仅是 Android 的关键组成部分，还可以用作强大的取证工具。

### Linux 简史

关于 Linux 的书籍已经有很多，而只将一个部分献给如此重要的操作系统是困难的。网上也有很多关于 Linux 的优秀资源，其中一些专注于将 Linux 作为取证工具。

1991 年，Linus Torvalds 是赫尔辛基大学的学生，他决定开发一个终端模拟器，以便连接到大学的系统。代码是为他的计算机特定开发的，该计算机配备了 Intel 386 处理器。完成初步开发后，他意识到这段代码实际上可以构成一个操作系统的基础，并在 Usenet newsgroup comp.os.minix 上发布了以下著名的消息（Torvalds, 1991）：

![image](img/F100019u01-01-9781597496513.jpg)

阅读这篇文章，许多热衷于 Linux 用户的思维方式体现在了想要理解、修改、创建和 otherwise 钻研复杂系统（通常被称为黑客心态）的愿望中。Linus 发布消息的 newsgroup 是为 Minix OS，当时许多想要测试和开发类似 Unix 的 OS 的人选择的操作系统。然而，Minix 的许可限制以及技术局限性是 Linus 想要克服的。

在近 20 年的时间里，Linux 已经显著成熟，并用于许多个人电脑、服务器，现在也用于移动设备。有数千个强大的工具以及许多编程语言的完整开发环境可供使用。有许多针对不同需求（包括服务器、工作站、笔记本电脑、嵌入式设备、安全套件等）的发行版。

#### 在 VirtualBox 中安装 Linux

Linux 是一个真正令人惊叹的操作系统，我们将在本书中以实例的形式利用它的力量，让读者跟随并完成。本书中的所有示例都是在运行虚拟机（VM）的 Ubuntu 10.10 64 位桌面安装上执行的。尽管来自多个供应商的虚拟机软件是兼容的（包括在 Mac OS X 上运行的 VMWare Fusion），但本书关注的是免费、开源或两者兼备的选项。在这种情况下，VirtualBox 既是开源软件，也是免费提供的。

注意

本书将广泛使用这个 Ubuntu VM 进行所有示例。后续章节将在此基础上增加更多工具和脚本。我们鼓励读者创建这个 Ubuntu VM，跟随所有示例以最大化知识吸收。Ubuntu VM 可以直接用于 Android 取证案例。

VirtualBox 现在归 Oracle 所有，并根据 GPLv2 许可进行分发。Oracle 的网站上有一个部分，专门解答关于许可的常见问题。

您可以从[`www.virtualbox.org/`](http://www.virtualbox.org/)为许多操作系统下载 VirtualBox，包括 Microsoft Windows、Mac OS X 和 Linux（2.4 和 2.6）。安装 VirtualBox 后，您将看到 Oracle VM VirtualBox Manager，如图 1.3 所示，在这里您可以创建和管理新的虚拟机。

![image](img/F100019f01-03-9781597496513.jpg)

图 1.3 Oracle VM VirtualBox Manager for OS X。

当你创建新的虚拟机时，请确保你有足够的硬盘空间（至少推荐 20 GB）和尽可能多的可用 RAM。对于 Android 构建，谷歌建议至少有 1536 MB（1.5 GB）的 RAM（获取 Android 源代码，未确定日期）。

使用 VirtualBox 管理器的图形用户界面（GUI）设置新的虚拟机非常直接。但是，如果你可以访问 Ubuntu Linux 64 位工作站或服务器，但没有能力运行桌面应用程序，以下是你设置、配置和运行新虚拟机（VirtualBox 3.2.10）的步骤。

从 ssh 会话中，最好使用“screen”程序，这样如果你与服务器失去连接，你的虚拟机仍然保持活动状态。然后，按照以下步骤操作：

![image](img/F100019u01-02a-9781597496513.jpg)

![image](img/F100019u01-02b-9781597496513.jpg)

在这一点上，虚拟机将启动，你可以使用任何远程桌面协议（RDP）查看器访问安装，例如 Windows 上的远程桌面连接，Linux 上的 rdesktop，或者 Mac 上的 Microsoft 远程桌面连接客户端。要访问上述会话，你可以连接到<主机服务器的 IP:3392>。从那里，按照安装指导操作，直到需要重启。

如果您关闭或重新启动 VBoxHeadless 会话，会话将结束；你可以再次运行命令来启动服务器备份。然后，通过 RDP 重新进入机器并安装 openssh 服务器，这样我们可以使用效率更高的 ssh 而不是 RDP：

![image](img/F100019u01-03-9781597496513.jpg)

您可以通过运行 ifconfig 并查看 eth0 的“inet addr”来找到虚拟机的 IP 地址。你可以使用你喜欢的 ssh 程序（如果在 Windows 上，可以尝试出色的免费客户端 Putty）并通过 ssh 进入虚拟机。

##### The Sleuth Kit（TSK）

布莱恩·卡里尔有一个优秀的开源取证工具包，名为 The Sleuth Kit（TSK），本节将讨论这个工具。本书中的示例将广泛使用 TSK。布莱恩开发并继续维护 TSK，为我们的行业提供了巨大的服务。如果你不熟悉 TSK，请访问[`sleuthkit.org/`](http://sleuthkit.org/)的网站，并考虑使用这些程序。TSK 的网站上有很多信息，以及许多取证博客和书籍。如果你打算按照本书中的示例操作，你应该在 Linux 工作站上安装 TSK，命令如下：

![image](img/F100019u01-04-9781597496513.jpg)

希望其他人能跟随布莱恩的脚步，为取证社区提供如此重要的工具包和服务。

#### 禁用自动挂载

关键是取证工作站不能启用自动挂载，正如其名称所暗示的，当在连接的设备上发现文件系统时，它会自动挂载。在 Ubuntu 中禁用自动挂载的选项是按用户进行的，因此如果工作站将拥有多个用户账户，请确保你更改每个账户：

![image](img/F100019u01-05-9781597496513.jpg)

然后导航到 apps > nautilus > preferences，并确保“media_automount”和“media_automount_open”选项未勾选，如图 图 1.4 所示。

![图像](img/F100019f01-04-9781597496513.jpg)

图 1.4 在 Ubuntu 上禁用自动挂载。

然后，你可以关闭 Gnome 配置编辑器。现在，自动挂载已禁用。对于普通用户来说，这需要更多的工作。然而，对于取证分析师来说，这是绝对必要的（使用硬件写保护器也是必要的）。

#### Linux 和取证—基本命令

在我们设置和配置 Linux 取证工作站之前，提供 Linux 与取证相关性的概述很有帮助。由于对许多文件系统的广泛支持、可用的先进工具以及开发和编译源代码的能力，Linux 工作站是取证调查的强大工具。然而，由于许多检查员不熟悉 Linux，以下部分提供了某些更常见 Linux 命令的分解，包括命令的描述、一般用法以及一个或多个如何应用该命令的示例。

#### man

“man”命令可以在终端窗口中拉起所请求命令的在线手册。手册将提供命令的详细描述以及其用法（包括该命令的所有选项或“标志”）。

![图像](img/F100019u01-06-9781597496513.jpg)

在以下示例中，第一个命令列出了“mount”命令手册页的开头，而第二个命令搜索包含“grep”字符的所有手册，这是一个强大的搜索工具。

![图像](img/F100019u01-07-9781597496513.jpg)

#### help

“help”命令会显示有关请求命令的信息，包括用法和示例，类似于“man”。一些命令使用--help 表示法，而其他命令则简单地使用-h 或-help。

![图像](img/F100019u01-08-9781597496513.jpg)

#### cd

此命令用于切换到另一个目录。在 Linux 中，特殊字符~用来表示当前用户的家目录。例如，用户 ahoog 在 Linux 系统上的家目录位于/home/ahoog。在文件系统的任何位置，你都可以使用~来引用/home/ahoog。这对于文档编写来说很方便，因此在本书中我们都会提到~，即使你设置了不同的用户名，命令仍然可以按预期工作。

![图像](img/F100019u01-09-9781597496513.jpg)

#### mkdir

“mkdir”命令在当前位置创建一个目录，除非另有指定。

![图像](img/F100019u01-10-9781597496513.jpg)

#### rmdir/rm

这个命令根据指定的标志删除现有目录或文件。"rmdir" 命令只删除空文件夹。如果目录中有文件，这些文件需要先被删除，然后才能运行“rmdir”命令。"rm" 命令可用于删除文件和文件夹，并在删除前提示用户。你可以使用 -f 选项覆盖提示，但需谨慎使用，因此有“rm minus rf”或 rm -rf 的说法。

![image](img/F100019u01-11-9781597496513.jpg)

#### nano

“nano”是一个基于终端的编辑器，允许创建和修改文本文件。要创建文件，只需输入命令。

![image](img/F100019u01-12-9781597496513.jpg)

输入“nano”将会在终端窗口或 ssh 会话中打开文本编辑器，允许用户输入他们希望的内容，如图 1.5 所示。

![image](img/F100019f01-05-9781597496513.jpg)

图 1.5 使用“nano”创建文件。

输入文本后，按下 Control X 将退出文本编辑器并提示你保存文件。在这种情况下，我们将文件名设置为 newfile.txt。

要修改现有文件，只需在 nano 命令后跟文件名或完整路径和文件名（如果文件在不同的目录中）：

![image](img/F100019u01-13-9781597496513.jpg)

#### ls

这个命令列出文件和文件夹。"ls" 命令在没有指定任何选项的情况下，将只列出当前目录中的文件/文件夹名称。添加“-lh”选项将提供更详细的列表，包括权限、所有权、大小以及日期和时间戳。

![image](img/F100019u01-14-9781597496513.jpg)

#### tree

“tree”命令显示指定目录的文件夹层次结构。如果没有指定参数，将使用当前目录。在 Linux 中，当前目录被称为单个“.”，而上一层目录是双点“..”。在以下输出中，使用了当前目录，恰好是当前用户的主目录。用户可以使用“-L”标志指定他们希望查看的目录级别。在第一个示例中，显示了一个级别。而在第二个示例中，显示了源目录和文件的两个级别。别忘了：你可以通过查看手册页（man tree）或指定命令的帮助参数（tree --help）来了解命令的所有细节。

![image](img/F100019u01-15-9781597496513.jpg)

#### less

“less”命令一次显示一个指定的文件页面。这个命令通常与其他命令结合使用，以一次显示一个页面的输出。以下命令将在终端窗口中一次显示 sanitize-csv.sh 文件的内容一屏幕。一旦你进入了 less 工具，有几个关键命令需要记住：

• h: 访问帮助菜单

• q: 退出帮助菜单

• 空格键: 显示下一屏幕/页

• b: 显示上一屏幕/页

• /: 搜索一个模式

• Enter: 向下移动一行

• y: 向上移动一行

这个强大的实用工具还有更多的命令和技巧，所以请阅读帮助屏幕，手册页，或者直接在互联网上搜索更多有用的技巧。

![image](img/F100019u01-16-9781597496513.jpg)

#### cat

“cat”命令将文件内容输出到屏幕或如果指定了则输出到新文件（不保留文件的格式）。

![image](img/F100019u01-17-9781597496513.jpg)

此命令还可以用于将多个文件合并为一个（即，通常称为连接文件）。

![image](img/F100019u01-18-9781597496513.jpg)

#### find

“find”命令用于在目录层次结构中搜索文件。以下命令将列出指定用户主目录中包含的所有文件，包括完整路径。

![image](img/F100019u01-19-9781597496513.jpg)

“find”命令的输出也可以在另一个命令中使用。例如，以下命令将对“find”命令中的文件运行“md5sum”命令。指定了几个参数：

• find：该命令

• ∼：在当前用户的主目录中查找文件

• -type f：只列出普通文件（不列出目录）

• -exec：运行以下命令

• sha256sum：计算文件 sha256 哈希值的实用工具

• {} \;：疯狂的 shell 转义和符号！

![image](img/F100019u01-20-9781597496513.jpg)

如果你针对大量文件的运行命令，可能会遇到问题。在这种情况下，你应该研究将 file 命令的输出管道传输到一个名为 xargs 的实用工具。

对于大多数 Linux 命令，你还可以将命令的输出保存到文件中。例如，上面相同命令的输出可以保存在用户主目录中的名为 md5.txt 的文件中：

![image](img/F100019u01-21-9781597496513.jpg)

对 sha256sum 实用工具运行的 find 命令的输出被重定向到用户主目录中的 sha256sum.txt 文件。

#### chmod

“change mode”的缩写，这个命令用于改变文件或文件夹的权限。以下列表中提供了许多示例。请注意，这些命令必须在存储“textfile.txt”的目录中运行，或者提供文件的完整路径。

![image](img/F100019u01-22-9781597496513.jpg)

“chmod”命令也可以对一组文件或文件夹运行。

![image](img/F100019u01-23-9781597496513.jpg)

#### chown

“chown”命令用于更改指定文件或目录的所有者或组。在以下示例中，“textfile.txt”的原始所有者和组是 ahoog。chown 命令将所有者更改为“root”。此命令需要“sudo”。

![image](img/F100019u01-24-9781597496513.jpg)

#### sudo

在任何命令前加上“sudo”可以让用户获得提升的权限，使他们能够以超级用户或其他用户的身份运行命令。对于某些命令，例如 apt-get（安装软件）、chown（如果你不是所有者，更改所有权）、mount、访问原始磁盘设备等，需要 sudo 权限。要使用 sudo，只需在命令前加上“sudo”，然后系统会提示你输入密码。然后记录命令在 sudo 日志中：

![image](img/F100019u01-25-9781597496513.jpg)

#### apt-get

apt-get 命令中的“apt”部分代表高级包装工具，允许用户安装和卸载软件，升级现有软件，甚至执行系统更新。要运行此命令，需要 sudo 权限。

![image](img/F100019u01-26-9781597496513.jpg)

#### grep

“grep”命令可以在一个文件或一系列文件和文件夹中搜索一个特定的短语。这相当于打开一个文档并执行“查找”特定短语的操作。搜索是区分大小写的，所以如果你不确定一个字母是大写还是小写，你应该指定“-i”（不区分大小写）标志。这个选项可能会根据被搜索文件的大小花费更长时间。

常规用法是：

![image](img/F100019u01-27-9781597496513.jpg)

下面包含了一些“grep”用法示例。

![image](img/F100019u01-28-9781597496513.jpg)

下一个命令在用户桌面的所有文件内容中搜索单词“unnecessary”。结果显示这个单词在“textfile.txt”中被找到，并且在“WXP-PRO-OEM.iso”中也匹配到了这个单词。因为这是一个二进制文件，需要执行进一步的技术才能查看内容。

![image](img/F100019u01-29-9781597496513.jpg)

当你更广泛地使用 Linux 进行法医调查时，grep 将变成一个不可或缺的工具。

#### 管道和重定向文件（| 和 >）

管道符“|”（在大多数键盘上位于“Enter”键上方）允许将一个命令的输出发送到另一个命令进行进一步处理。输出也可以使用“>”重定向到另一个文件中。

下面的命令将“cat file.txt”的结果传递给“less”命令，允许用户一次查看一页内容。

![image](img/F100019u01-30-9781597496513.jpg)

下一个命令使用 grep 命令在“ch1.xml”中搜索“android”，然后取该搜索的结果并执行另一个不区分大小写的“forensics”搜索。最终结果通过“less”管道显示，一次查看一页。

![image](img/F100019u01-31-9781597496513.jpg)

重定向命令的输出也可以很有帮助。下面的命令将“book.txt”的输出（使用“cat”命令）并复制到用户桌面上名为“newdocument.txt”的文件中。

![image](img/F100019u01-32-9781597496513.jpg)

在对特定文件甚至整个磁盘映像运行“strings”命令时，重定向可能非常有帮助，这将在第七章中进一步探讨。

## 安卓开源项目

安卓背后的开放策略自然导致了安卓源代码通过 AOSP 在 2008 年 10 月 21 日的发布。该网站称（获取安卓源代码，n.d.）：

我们创建安卓是为了响应我们在发布移动应用时的自身经验。我们希望确保始终有一个开放的平台供运营商、OEM（原始设备制造商）和开发者使用，以实现他们的创新想法。我们希望确保没有中央故障点，一个行业参与者不能限制或控制其他任何人的创新。我们选择的解决方案是一个开放且开源的平台。

开发策略专注于旗舰设备（例如，Nexus 系列），这使得谷歌能够承担新平台的大部分风险。制造商可以在他们的设备上使用最新版本的安卓，而 AOSP 则开发下一个主要版本。

### AOSP 许可证

AOSP 受两个主要软件许可证管理，分别是 Apache 软件许可证 2.0（Apache 2.0 或 ASL2.0）和 GNU 公共许可证 v2（GPLv2）。GPLv2 是一个限制性更强的许可证，它迫使贡献者以相同的许可证分发所有源代码。谷歌认为这将限制安卓的商业支持，因此 GPLv2 主要涵盖将 Linux 内核核心用于安卓的使用。

Apache 2.0 许可证更受商业实体接受，因为它限制较少，不会强迫公司开源所有相关软件。AOSP 解释了为何选择 Apache 2.0 许可证的问题（Licenses, n.d.）：

有时有人问为何 Apache 软件许可证 2.0 是安卓首选的许可证。对于用户空间（即非内核）软件，我们确实更喜欢 ASL2.0（以及类似 BSD、MIT 等许可证）而不是其他许可证，如 LGPL。

安卓关于自由和选择。安卓的目的是在移动世界中推动开放，但我们认为不可能预测或规定人们将如何使用我们的软件。因此，尽管我们鼓励每个人制造开放且可修改的设备，但我们认为强迫他们这样做并非我们的职责。使用 LGPL 库通常会强迫他们这样做。

这里有一些我们具体的考虑：

1. LGPL（简单来说）要求以下其一：向应用程序提供源代码；提供书面源代码要约；或者动态链接 LGPL-ed 库，并允许用户手动升级或替换库。由于 Android 软件通常以静态系统映像的形式发布，因此遵守这些要求最终会限制 OEM 的设计。（例如，用户很难在只读闪存存储上替换库。）

2. LGPL 要求允许客户修改和逆向工程以调试这些修改。大多数设备制造商不想受到这些条款的约束，因此为了最小化这些公司负担，我们在用户空间最小化使用 LGPL 软件。

3. 从历史上看，LGPL 库是下游设备制造商和应用程序开发人员合规问题的来源。不幸的是，教育工程师这些问题既困难又进展缓慢。对于设备制造商尽可能容易地遵守许可至关重要。鉴于过去遵守 LGPL 的困难，如果可以避免，最谨慎的做法是根本不使用 LGPL 库。

上文讨论的问题是我们在自己的代码中偏好 ASL2.0 的原因。这不是对 LGPL 或其他许可证的批评。我们对这个话题有强烈的看法，甚至到了我们特意确保尽可能多的代码使用 ASL2.0 的地步。然而，我们热爱所有自由和开源许可证，并尊重其他人的观点和偏好。我们只是决定 ASL2.0 符合我们目标的权利许可证。

### 开发过程

AOSP 是一个非常复杂且复杂的开源项目，需要全球许多开发者的协作。因此，AOSP 有一套定义明确的角色和流程，必须遵循这些角色和流程才能为项目做出贡献。这些角色包括以下：

• 贡献者/开发者：为项目贡献代码的个人和公司

• 验证人：测试代码更改的个人

• 审批者：决定更改是否被采纳或排除的有经验的开发者

• 项目负责人：通常是负责 AOSP 项目整体管理的谷歌员工

任何人都可以下载、编译和增强 AOSP 项目。图 1.6 展示了开发流程。

![图像](img/F100019f01-06-9781597496513.jpg)

图 1.6 AOSP 开发过程。

### 开源在取证中的价值

并非所有的法医鉴定人员都会或需要直接为 AOSP 做出贡献。然而，下载这个软件具有极大的价值。例如，在检查来自 Android 1.5 设备的 Yet Another Flash File System2（YAFFS2）物理镜像时，使用 strings 提取 ASCII 文本时，“silly old name”这个短语经常出现。对于大多数文件系统，鉴定人员可能只能猜测“silly old name”的相关性。但是，通过下载源代码，鉴定人员可以快速搜索这个短语，识别代码，并检查它以获取更多信息。在这种情况下，当更新 YAFFS2 对象的头部（例如，一个文件）时，在特定情况下，名称字段会被设置为“silly old name”。

在 AOSP 的文件 kernel/fs/yaffs2/yaffs_guts.c 中，有一个名为 yaffs_UpdateObjectHeader 的函数。代码中的注释和函数头如下所示：

![image](img/F100019u01-33-9781597496513.jpg)

创建一个名为“oldName”的变量，内容为“silly old name”：

![image](img/F100019u01-34-9781597496513.jpg)

当之前的“ChunkId”大于 0 时，对象头部的名称字段被更新为“oldName”：

![image](img/F100019u01-35-9781597496513.jpg)

代码还检查原始调用函数是否为对象传递了一个新名称。如果没有为函数提供新的名称值，则使用 oldName 的值（仍然是“silly old name”）：

![image](img/F100019u01-36-9781597496513.jpg)

虽然不是每个鉴定人员都擅长解读程序员代码（在本例中是 C 语言），显然这些信息在法医鉴定中可能是有用的。当然，还有许多其他情况，比如短信如何被时间戳标记或地理标记如何实现，这些都可能为鉴定带来巨大的价值。

### 下载并编译 AOSP

希望在之前的 YAFFS2 示例中已经证明了参考 Android 源代码的价值。以下部分将介绍你应该遵循的步骤，以从 AOSP 下载并编译最新版本。虽然 Android 2.2 及更早版本可以在 32 位机器上编译，但 AOSP 的最新版本（Android 2.3）及以后的版本需要 64 位计算机。

使用我们之前构建的 Ubuntu 虚拟机，我们现在可以开始更新默认的 Ubuntu 安装，然后从源代码构建 Android。

![image](img/F100019u01-37a-9781597496513.jpg)

![image](img/F100019u01-37b-9781597496513.jpg)

恭喜你，你已经从源代码构建了 Android（或者开始了构建过程——这需要一段时间）。

现在，如果你遇到了需要更深入理解的 Android 方面，你可以搜索源代码并了解更多。表 1.5 列出了核心 Android 项目，你会发现这与 Android 源代码树中的目录大致对应。项目信息可以在 AOSP 网站找到，地址是[`sites.google.com/a/android.com/opensource/projects`](https://sites.google.com/a/android.com/opensource/projects)，该网站提供了每个项目功能的简要描述。

表 1.5 核心 Android 项目

| 项目 | 描述 |
| --- | --- |
| bionic | C 运行时：libc, libm, libdl, 动态链接器 |
| bootloader/legacy | 引导加载程序参考代码 |
| build | 构建系统 |
| dalvik | Dalvik 虚拟机 |
| development | 高级开发和调试工具 |
| frameworks/base | 核心 Android 应用框架库 |
| frameworks/policies/base | 框架配置策略 |
| hardware/libhardware | 硬件抽象库 |
| hardware/ril | 无线接口层 |
| kernel | Linux 内核 |
| prebuilt | 支持 Linux 和 Mac OS 构建的二进制文件 |
| recovery | 系统恢复环境 |
| system/bluetooth | 蓝牙工具 |
| system/core | 最小可启动环境 |
| system/extras | 低级调试/检查工具 |
| system/wlan/ti | TI 1251 WLAN 驱动和工具 |

## 国际化

Android 在整个平台对国际语言和地区设置有广泛支持。这不仅允许手机以多种语言显示菜单、网站和其他图形用户界面方面，还支持各种国际键盘格式的输入。

### Unicode

Android 支持多种语言的能力的关键在于其对 Unicode 字符的编码和解码能力，Unicode 是行业标准编码方案，支持超过 600 种语言（Languages and scripts, n.d.）。

小贴士

### 楔形文字支持

对于那些好奇且勇于探索的读者，Unicode 确实支持楔形文字，尽管我们仍在等待有人将 Android 用户界面实现为苏美尔-阿卡德楔形文字。可以在[`unicode.org/repos/cldr-tmp/trunk/diff/supplemental/languages_and_scripts.html`](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/languages_and_scripts.html)查看 Unicode 支持的语言和脚本的全列表。

### 键盘

Android 支持许多不同类型的键盘，有时被称为输入方法。例如，在运行 Android 虚拟设备（AVD）时，模拟器允许你更改键盘输入的语言，如图图 1.7 所示。

![image](img/F100019f01-07-9781597496513.jpg)

图 1.7 配有中文数字键盘的 Android 虚拟设备。

AVD 系统自带处理多种语言的能力。在法医调查中，这一点具有重要意义，分析人员必须保持警惕，考虑到一些数据可能以意想不到的语言编码。

ADV 的同一功能在物理 Android 设备上也同样可用。例如，在美国由 Verizon Wireless 分销的 HTC Incredible 手机上，有一个名为语言和键盘的设置。你可以为手机用户界面选择两种语言：英语和西班牙语。然后在文本设置下，你可以选择你的触摸输入设置。从这里，你可以指定键盘类型（QWERTY，电话键盘或紧凑型 QWERTY），从 20 多种国际键盘中选择，为中文文本输入选择特定选项（繁体中文或简体中文），以及许多其他选项。最新版本的 Android（姜饼，2.3）现在支持 57 种语言（Android 2.3 平台, n.d.）。

最后，Android 支持用户安装第三方键盘。一个越来越受欢迎的替代键盘叫做 Swype，它允许用户在键盘上连续拖动手指到每个字母。软件然后能够确定，你输入的单词的概率很高。该软件支持多种语言，是一个可插拔键盘输入的好例子。

### 定制分支

由于 Android 是作为开源发布的，任何人（包括你，在上面的步骤之后！）都可以下载并定制 Android 源代码。虽然许多最终将他们的更改反馈给 Google 以便纳入 Android 的人，但有些人完全分支了代码并发布了他们自己的 Android 版本。

#### 市场后固件

定制 Android 分支（也称为 Mods，固件和 ROMs）最丰富的例子可能来自 Android 黑客和爱好者社区。这个社区是一个非常庞大且多元化的群体，他们有动力去开发、实验和黑客攻击 Android。他们的一些工作可能涉及在 Android 设备上获取 root 权限，启用新功能，或者仅仅吹嘘他们最新的定制成果。这个社区充满激情，成果丰富，是信息（以及误信息）的绝佳来源，并且他们回应了许多求助请求。如果认真的 Android 研究人员忽视了这个社区，那将是一个疏忽。然而，信息的庞大量使得这成为一个非常耗时的努力。

最受欢迎的社区之一名为 XDA Developers，其自述为“Android 和 Windows Mobile 平台的智能手机爱好者和开发者最大的互联网社区”（xda-developers, n.d.）。他们的网站拥有超过 320 万的注册用户，并运营着一个令人印象深刻的论坛。

许多定制 Mod 在 XDA 上发布，而且开发者本身也经常活跃在社区中。或许最受欢迎的售后固件就是 CyanogenMod。这个固件基于 AOSP，它增加了新功能，并尝试在基于 Android 的 ROM 上提高设备的性能和可靠性，这些 ROM 是由厂商和运营商直接发布的（CyanogenMod，未标明日期）。目前，CyanogenMod 支持来自六家制造商的 17 种不同的智能手机和平板设备：Commitva、Dell、HTC、Motorola、Samsung 和 Viewsonic。这些售后固件在设备上启用了 root 权限，正如我们将在第六章中讨论的，这是获取设备物理获取的关键。

#### OPhone OS

开放移动手机操作系统（OPhone OS）基于 Android，由中国的软件开发商 Borqs 开发。OPhone OS 是为中国政府的子公司中国移动设计的，中国移动是世界上最大的移动运营商，拥有超过 5 亿用户。2010 年 6 月，OPhone OS 2.0 在北京发布，尽管 Borqs/OPhone OS 在中国以外相对不知名，但它们显然在 Android 生态系统中的重要性和影响力正在增长。在中国内部，Borqs 的 CEO 表示他们只与一家运营商合作，即中国移动，因为在那个国家“你不能侍奉两个主人”（中国的 OPhone，未标明日期）。

因此，他们为中国移动软件保留了 OPhone OS 这个名字。然而，根据他们的网站，他们还开发了一个名为 Android+的 Android 软件分支（中国的 OPhone，未标明日期）。在他们的新闻稿中，Borqs 解释了 Dell Aero 配备了他们的 Android+软件，其中包括类似苹果的用户界面，并且他们的软件也通过 Dell 在巴西和墨西哥进行分发。

#### 在 iPhone（及其他非 Android 设备）上运行 Android

或许最具有争议性的售后固件之一就是能让 Android 在 iPhone 上运行的固件。由于许多移动设备基于 ARM 处理器，因此移植过程是可行的。这使得 Android 能够运行在那些设计用来运行其他操作系统（如 Windows Mobile、Symbian、iOS 等）的设备上。向苹果粉丝展示你那运行着 Android 的漂亮 iPhone，感觉绝对独一无二！

## Android 市场

安卓市场是第三方开发者向任何拥有安卓设备的用户发布应用程序的途径。安卓市场最早是在 2008 年 8 月 28 日在谷歌开发者博客上宣布的，作为“一个开放的 内容分发系统，帮助最终用户在他们的安卓设备上找到、购买、下载和安装各种类型的内容”（Android 开发者博客，n.d.）。市场在 2008 年 10 月首次推出时，并不支持付费应用程序。然而，到了 2009 年初，安卓市场在美国和英国都支持付费应用程序。到 2011 年 1 月，安卓市场在 29 个国家支持付费应用程序（支持地区，n.d.）。其他几个国家，尤其是印度，可以使用安卓市场，但目前无法安装付费应用程序。

谷歌对安卓市场的宽松管理方式与苹果对其应用商店的严格管理形成了鲜明对比。尽管安卓市场对用户有服务条款（Android Market 条款，n.d.）和针对开发者的安卓市场开发者分销协议（Android Market 开发者，n.d.），但应用程序发布到市场时无需经过审批过程。相反，谷歌认为应用程序评分将筛选出有缺陷或价值不高的应用程序。

要在安卓市场上发布应用程序，开发者必须注册，支付 25 美元的费用，并使用私钥签署他们的应用程序，这将唯一标识他们在市场上的身份。当用户购买应用程序时，开发者获得 70%的购买价格，剩余的 30%归谷歌所有（有时还包括涉及的运营商）。最初，用户有一个 48 小时的窗口期可以退回应用程序。然而，在 2010 年 12 月，谷歌将这个窗口期缩短到了 15 分钟。

谷歌不仅有能力从安卓市场远程删除应用程序，还可以直接从安卓设备上删除。远程应用程序移除功能是安卓拥有的一种安全控制措施，能够迅速且可扩展地移除危险应用程序，以防止用户进一步暴露于风险之中（Android 开发者博客：锻炼，n.d.）。这项安全控制措施首次在 2010 年 6 月实施，当时一名安全研究员发布了一款概念验证应用程序，该程序可以允许下载并在设备上安装另一个应用程序（Mills, n.d.）。

在安卓开放的精神下，谷歌并不阻止用户直接从开发者的网站在他们的手机上安装应用程序，也不阻止开发一个竞争的应用市场。除了安卓市场，还有几个较小的替代市场。此外，一些大型公司已经宣布或表示有意创建替代的应用商店，包括亚马逊、百思买和威瑞森。

### 安装应用程序

要从 Android 市场（如图 Fig. 1.8 所示）安装应用，用户首先必须运行市场应用并使用 Gmail 账户登录。该账户允许用户通过 Google Checkout 账户购买付费应用，并提供地址和信用卡信息。最近，谷歌与一些运营商合作，用户可以直接将应用购买费用计入月度无线运营商账单，而不使用 Google Checkout 的信用卡。

![image](img/F100019f01-08-9781597496513.jpg)

图 1.8 显示了运行 Android 2.2 的 HTC Incredible 上的 Android 市场。

市场应用允许用户搜索应用，并按主题或流行度浏览。选择一个应用后，会显示一个专门的应用页面，用户可以从该页面安装应用。专门页面还提供一般信息，如描述、下载次数、平均评分、详细评论、相关应用、开发者信息，最后还提供了反馈或标记应用不适当的机会。

正如我们将要讨论的，权限是 Android 安全性的核心组成部分。一旦用户决定安装应用，他们会看到显示应用请求的所有权限的屏幕，如图 Fig. 1.9 所示。此时，用户可以接受权限并继续安装，或返回上一个屏幕。

![image](img/F100019f01-09-9781597496513.jpg)

图 1.9 显示了 Android 应用权限。

应用随后会被下载并安装，结果会显示在设备顶部的通知栏中。从那里，用户可以运行应用，或随时从应用列表中访问。

要卸载应用，用户可以访问设备的设置，选择应用设置。从那里，他们可以管理应用（参见 Fig. 1.10），这将显示具有各种特征的应用列表，如已下载、正在运行和位于 SD 卡上。

![image](img/F100019f01-10-9781597496513.jpg)

图 1.10 管理应用。

用户选择一个应用后，可以看到应用信息屏幕，显示有关应用的各种信息，并允许用户进行强制停止、清除数据、清除缓存和卸载等操作，如图 Fig. 1.11 所示。

![image](img/F100019f01-11-9781597496513.jpg)

图 1.11 应用信息，包括卸载。

### 应用统计

Android 市场正在快速成长。发布六个月后，T-Mobile 的首席技术官 Cole Brodman 表示，用户需要更多过滤器才能从市场上近 2300 个应用中成功找到应用 (Lawson, n.d.)。到 2011 年 1 月，市场上已有超过 20 万个应用，仅 2010 年 11 月就增加了 27,227 个 (Android Market statistics, n.d.)。估计下载应用的数量已超过 25 亿。

显然，应用程序是安全和取证的关键关注领域。第四章中，我们将详细探讨应用程序如何将数据持久化到 Android 设备上，存储了哪些类型的信息，以及如何恢复和分析数据。

## 安卓取证

显然，我们需要安卓取证。智能手机通常是了解个人信息的唯一电子设备。对于大多数人来说，他们的智能手机在任何时候都很少离他们超过几英尺远，甚至包括睡觉时。该设备融合了个人和公司信息，并有能力存储大量数据，包括短信、电子邮件、GPS 位置、图片、视频等。人们倾向于对智能手机比对任何其他个人或设备更诚实。为什么？因为人们觉得设备是安全的，可以为他们提供问题的答案，这些问题他们可能选择不与任何人分享。不止一位取证检验员开玩笑说，“你搜索的东西代表了你”，这显然是亲眼看到人们如何诚实用手机的第一手经验。

### 挑战

当然，值得一做的事情都不容易，移动取证尤其是安卓取证面临着许多必须克服的挑战。

数字取证的一个基本目标是防止检验员对目标设备进行任何修改。然而，移动电话缺少可以关闭、连接写保护器并以取证方式镜像的传统硬盘。与智能手机的任何互动都会以某种方式改变设备。因此，检验员在检查移动设备时必须使用他们的判断力，如果设备被修改了，他们必须解释它是如何被修改的，以及为什么做出这样的选择，这同样重要。

一些取证检验员对此方法持有异议，并引发了争论。然而，可能改变针对取证目标的计算机的技术已经被使用了一段时间。例如，在恶意软件攻击的调查中，通常需要进行实时内存分析。同样，如果硬盘被加密，检验员必须在设备运行时进行镜像处理，否则他们可能永远无法访问硬盘上的数据。其他典型的例子是因复杂环境而必须保持在线的系统，这在涉及大型企业服务器的案件中很常见。尽管每位检验员都应努力不改变他们正在调查的设备，但在移动世界中这几乎是不可能的。因此，如果不能修改设备，那么唯一的选择就是不对设备进行检验。显然，这种选择是不可接受的，因为移动取证在许多调查中都是关键证据，甚至已经解决了很多犯罪案件。

进一步复杂化 Android 取证的是设备的多样性、Android 版本以及应用程序。仅设备和 Android 版本的排列组合就有数千种，每个设备加上平台都有其独特的特性。尽管可以对每部 Android 手机进行逻辑分析，但庞大的组合使得完全物理获取*所有* Android 设备几乎不可能实现。即使是 Android 版本中的微小差异，在高风险案件中也可能需要广泛的测试和验证。

## 摘要

Android 是一个快速成长、功能丰富且令人兴奋的移动平台。特性、连接性和流行度的结合自然导致了 Android 取证需求的增长。尽管移动取证的难度在增加，但其价值也在提升。Android 的开源特性极大地帮助取证分析师掌握了所需的基础知识，使得 Android 成为一个理想的作业平台。

## 参考文献

[开放手持设备联盟常见问题解答](http://www.openhandsetalliance.com/oha_faq.html)。（未注明日期）。2011 年 1 月 3 日检索。

开放手持设备联盟成员。（未注明日期）。*开放手持设备联盟*。2011 年 3 月 9 日检索自 [`www.openhandsetalliance.com/oha_members.html`](http://www.openhandsetalliance.com/oha_members.html)。

[Android 开发者博客：Android 市场：一个用户驱动的 content 分发系统](http://android-developers.blogspot.com/2008/08/android-market-user-driven-content.html)。（未注明日期）。2011 年 1 月 9 日检索。

[Android 开发者博客：锻炼我们的远程应用移除功能](http://android-developers.blogspot.com/2010/06/exercising-our-remote-application.html)。（未注明日期）。2011 年 1 月 9 日检索。

[Android Market 开发者分发协议](http://www.android.com/us/developer-distribution-agreement.html)。（未注明日期）。2011 年 1 月 9 日检索。

[Android Market 服务条款](http://www.google.com/mobile/android/market-tos.html)。（未注明日期）。2011 年 1 月 9 日检索。

[来自 AndroLib 的 Android Market 统计数据，Androlib，Android 应用和游戏目录](http://www.androlib.com/appstats.aspx)。（未注明日期）。2011 年 1 月 9 日检索。

[Android 2.3 平台和 Android 开发者](http://developer.android.com/sdk/android-2.3.html#locs)。（未注明日期）。2011 年 1 月 8 日检索。

9\. Bort, D.（未注明日期）*Android 现在可以作为开源使用*。Android 开源项目。2011 年 1 月 3 日检索自[`sites.google.com/a/android.com/opensource/posts/opensource`](https://sites.google.com/a/android.com/opensource/posts/opensource)。

10\. *中国的 OPhone 将作为 Android 进入美国市场*+。（未注明日期）。2011 年 1 月 8 日检索自[`www.borqs.com/news.jsp`](http://www.borqs.com/news.jsp)。

11\. *公司信息：关于*。（未注明日期）。谷歌。2011 年 1 月 4 日检索自[`www.google.com/corporate/`](http://www.google.com/corporate/)。

12\. *comScore 报告 2010 年 11 月美国移动用户市场份额*。（未注明日期）。comScore 公司。2011 年 1 月 9 日检索自[`www.comscore.com/Press_Events/Press_Releases/2011/1/comScore_Reports_November`](http://www.comscore.com/Press_Events/Press_Releases/2011/1/comScore_Reports_November)。

13\. *关于 CyanogenMod 的 Rom，CyanogenMod*。（未注明日期）。2011 年 1 月 8 日检索自[`www.cyanogenmod.com/about`](http://www.cyanogenmod.com/about)。

14\. *高德纳报告称，2010 年第三季度全球手机销量增长了 35%，智能手机销量增加了 96%*。（未注明日期）技术研究和商业领袖洞察。高德纳公司。2011 年 3 月 9 日检索自[`www.gartner.com/it/page.jsp?id=1466313`](http://http://www.gartner.com/it/page.jsp?id=1466313)。

15\. *获取 Android 源代码，Android 开源*。（未注明日期）。2011 年 3 月 9 日检索自[`source.android.com/source/download.html`](http://source.android.com/source/download.html)。

16\. *谷歌投资者：谷歌 Android 每天激活 350,000 个设备（数据可视化视频）“顶级全球智能手机平台”*。（未注明日期）。2011 年 3 月 9 日检索自[`googinvestor.blogspot.com/2011/03/google-android-activations-350k-daily.html`](http://googinvestor.blogspot.com/2011/03/google-android-activations-350k-daily.html)。

17\. Krazit, T.（未注明日期）*谷歌的 Rubin：Android“一场革命”。数字媒体—CNET 新闻。技术新闻—CNET 新闻*。2011 年 1 月 5 日检索自[`news.cnet.com/8301-1023_3-10245994-93.html`](http://news.cnet.com/8301-1023_3-10245994-93.html)。

18\. 许可证。（未注明日期）*Android 开源*。2011 年 1 月 5 日检索自[`source.android.com/source/licenses.html`](http://source.android.com/source/licenses.html)。

19\. 语言和脚本。（未注明日期）*Unicode 联盟*。[`unicode.org/repos/cldr-tmp/trunk/diff/supplemental/languages_and_scripts.html`](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/languages_and_scripts.html)。

20\. Lawson, S.（未注明日期）*T-Mobile 表示 Android 市场需要更多过滤器*。ITworld，IT 新闻，技术分析和操作资源。2011 年 1 月 9 日检索自[`www.itworld.com/personal-tech/64481/android-market-needs-more-filters-t-mobile-says`](http://www.itworld.com/personal-tech/64481/android-market-needs-more-filters-t-mobile-says)。

21\. Mills, E.（未注明日期）。*谷歌远程清除 Android 手机上的应用*。InSecurity Complex—CNET 新闻。科技新闻—CNET 新闻。2011 年 1 月 9 日检索，来自 [`news.cnet.com/8301-27080_3-20008922-245.html`](http://news.cnet.com/8301-27080_3-20008922-245.html)。

22\. *官方谷歌博客：我的 Gphone 在哪里？*（未注明日期）。2011 年 1 月 2 日检索，来自 [`googleblog.blogspot.com/2007/11/wheres-my-gphone.html`](http://googleblog.blogspot.com/2007/11/wheres-my-gphone.html)。

23\. *商家支持的位置——Android Market 帮助*。（未注明日期）。2011 年 1 月 9 日检索，来自 [`www.google.com/support/androidmarket/bin/answer.py?hl`](http://www.google.com/support/androidmarket/bin/answer.py%3Fhl) = en&answer = 150324。

24\. Torvalds, L.（1991 年 10 月 5 日）。*适用于 386-AT 的类似 Minix 的自由内核源代码——comp.os.minix*。Google 群组。2011 年 3 月 3 日检索，来自 [`groups.google.com/group/comp.os.minix/msg/2194d253268b0a1b`](http://groups.google.com/group/comp.os.minix/msg/2194d253268b0a1b)。

25\. xda-developers。（未注明日期）。2011 年 1 月 8 日检索，来自 [www.xda-developers.com/](http://www.xda-developers.com/)。
