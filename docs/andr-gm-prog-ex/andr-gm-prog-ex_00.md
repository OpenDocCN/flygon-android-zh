# 前言

制作游戏是令人上瘾且非常有成就感的，一旦开始就很难停下来。问题出现在我们遇到障碍时，因为我们不知道如何实现一个特性，或者将其整合到游戏中。这本书是关于尽可能多地将 Android 2D 游戏特性压缩进 11 章的旋风之旅。

书中展示了构建三个难度递增的游戏的每一行代码，并以简单明了的方式进行了解释。

逐步构建一个灵活且先进的游戏引擎，使用 OpenGL ES 2 实现快速流畅的帧率。这是通过从一个简单的游戏开始，逐步增加三个完整游戏的复杂性来实现的。

实现酷炫的特性，如图像表角色动画和滚动视差背景。设计和实现真正具有挑战性和可玩性的平台游戏关卡。

学习编码基础和高级碰撞检测。简化 2D 旋转、速度和碰撞背后的数学。让你的游戏设计以每秒 60 帧或更好的速度运行。

处理多点触控屏幕输入。实现许多其他游戏特性，如拾取物品、发射武器、HUD、生成和播放音效、风景、关卡过渡、高分榜等。

# 这本书涵盖的内容

第一章，*玩家 1 启动*，是关于我们将构建的三个酷炫游戏的介绍。我们还将设置开发环境。

第二章，*Tappy Defender – 第一步*，是关于规划游戏项目，并让我们的第一个游戏引擎的代码运行起来。我们将实现一个主游戏循环，控制帧率，并在屏幕上绘制。

第三章，*Tappy Defender – 飞向太空*，教我们添加许多新对象和一些特性，如玩家控制、敌人以及背景中的滚动星星。在*碰撞检测 - 碰撞的东西*部分，我们将讨论碰撞检测选项，并为这个游戏实现一个高效的解决方案。

第四章，*Tappy Defender – 回家*，完成了游戏，包括增加高分榜、胜利条件、音效等。

第五章，*Platformer – 升级游戏引擎*，提供了理解简单游戏引擎所需内容的好方法。我们可以快速了解并构建更高级、更灵活的引擎，适用于真正困难、复古的 2D 平台游戏。

第六章, *平台游戏——鲍勃、哔哔声和碰撞*，使用我们的新游戏引擎添加一个类来管理声音特效，以及一个类来实现这类游戏所需的更复杂的玩家控制。然后我们可以让鲍勃，我们的可玩角色，成为一个奔跑、跳跃的英雄动画。

第七章, *平台游戏——枪、生命、金钱和敌人*，继续前两章的主题；在这一章中，我们将添加大量功能。我们将添加可收集的拾取物和升级包，一个致命的追踪敌人，以及一个巡逻的守卫。当然，所有这些功能，鲍勃将需要一把机枪来保护自己，他得到了一把！

第八章, *平台游戏——组合在一起*，我们的平台游戏在这里变得生动。我们将添加许多新的平台瓦片类型和场景对象，多个滚动视差背景，碰撞检测，以及一个传送系统，以便鲍勃可以在游戏的各个级别之间旅行。使用我们的瓦片类型、场景对象和背景范围，我们将实现四个通过传送系统连接的可玩关卡。

第九章, *使用 OpenGL ES 2 达到 60 FPS 的小行星*，包含本书的最终项目，这是对超快的 OpenGL 图形库进行 2D 游戏介绍。在本章中，我们将快速学习如何使用 OpenGL ES 2 进行绘制，并将绘制系统整合到我们的游戏引擎中。到本章结束时，我们将拥有一个可以绘制类似小行星风格太空船到屏幕上的工作引擎。

第十章, *使用 OpenGL ES 2 移动和绘制*，我们将快速整合之前项目中的声音和控制系统。然后，我们可以为玩家的太空船添加游戏边框、闪烁的星系、旋转的小行星、整洁的 HUD、逐渐增加难度的关卡以及快速开火的枪。

第十一章, *碰撞物——第二部分*，通过添加碰撞检测来完成小行星游戏。检测与不规则形状旋转的小行星碰撞所需的数学变得简单，并将其实现到游戏引擎中。在本章结束时，你将拥有第三个也是最后一个完全可玩的游戏。

# 本书所需准备

任何主流操作系统上运行的近期免费版 Eclipse 或 Android Studio 都可以使用本书中的代码。

推荐使用 Android Studio 作为开发工具，在本书出版时，最低系统要求如下：

对于 Windows：

+   微软 Windows 8/7/Vista/2003（32 或 64 位）

+   2 GB RAM 最低要求，4 GB RAM 推荐

+   400 MB 硬盘空间

+   至少 1 GB 空间用于 Android SDK、模拟器系统镜像和缓存

+   最低 1280 x 800 屏幕分辨率

+   Java 开发工具包（JDK）7

+   加速模拟器可选：支持 Intel VT-x、Intel EM64T（Intel 64）和执行禁用（XD）位功能的 Intel 处理器

对于 Mac OS X：

+   需要安装 Mac OS X 10.8.5 或更高版本，直至 10.9（Mavericks）

+   最低 2 GB RAM，建议 4 GB RAM

+   400 MB 硬盘空间

+   至少 1 GB 用于 Android SDK、模拟器系统映像和缓存

+   最低 1280 x 800 屏幕分辨率

+   Java 运行环境（JRE）6

+   Java 开发工具包（JDK）7

+   加速模拟器可选：支持 Intel VT-x、Intel EM64T（Intel 64）和执行禁用（XD）位功能的 Intel 处理器

在 Mac OS 上，使用 Java 运行环境（JRE）6 运行 Android Studio 以优化字体渲染。然后，您可以配置项目以使用 JDK 6 或 JDK 7。

对于 Linux：

+   GNOME 或 KDE 桌面

+   GNU C 库（glibc）2.15 或更高版本

+   最低 2 GB RAM，建议 4 GB RAM

+   400 MB 硬盘空间

+   至少 1 GB 用于 Android SDK、模拟器系统映像和缓存

+   最低 1280 x 800 屏幕分辨率

+   Oracle Java 开发工具包（JDK）7

在 Ubuntu 14.04，Trusty Tahr（64 位分发版，能够运行 32 位应用程序）上测试。

# 本书适合的读者

这本书最适合那些希望将自己的技能适应于开发激动人心的 Android 游戏的现有 Android 或 Java 程序员。

这本书也适合那些可能没有 Android、游戏编程甚至 Java 经验，但假定有良好面向对象编程理解的读者。

此外，具有至少一些面向对象编程（OOP）经验的坚定编程初学者也可以跟随并构建所有项目，因为这本书采用了逐步指导的方法。对于那些已经完成《通过构建 Android 游戏学习 Java》的读者来说，这本书也非常适合。

# 约定

在这本书中，您会发现多种文本样式，用于区分不同类型的信息。以下是一些样式示例及其含义的解释。

文本中的代码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 处理程序会像这样显示："我们首先会添加所有类，然后在通常的三个地方更新`LevelManager`。"

代码块设置如下：

```java
if (lm.isPlaying()) {
  // Reset the players location as 
  // the world centre of the viewport
  //if game is playing
  vp.setWorldCentre(lm.gameObjects.get(lm.playerIndex)
    .getWorldLocation().x,
    lm.gameObjects.get(lm.playerIndex)
    .getWorldLocation().y);
```

当我们希望您注意代码块中的特定部分时，相关的行或项目会以粗体显示：

```java
 //Has player fallen out of the map?
 if (lm.player.getWorldLocation().x < 0 ||
 lm.player.getWorldLocation().x > lm.mapWidth ||
 lm.player.getWorldLocation().y > lm.mapHeight) {

```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的内容，例如菜单或对话框中的，会像这样出现在文本中："在接下来显示的**创建新项目**窗口中，我们需要输入有关我们应用的基本信息。"

### 注意

警告或重要提示会像这样出现在一个框中。

### 提示

技巧和窍门会像这样出现。

# 读者反馈

我们非常欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢或不喜欢的地方。读者的反馈对我们很重要，因为它能帮助我们开发出您真正能从中受益的图书。

如果要给我们发送一般反馈，只需通过电子邮件 `<feedback@packtpub.com>` 联系我们，并在邮件的主题中提及书名。

如果您在某个主题上有专业知识，并且您有兴趣撰写或参与书籍编写，请查看我们的作者指南 [www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

既然您已经拥有了 Packt 的一本书，我们有很多方法可以帮助您充分利用您的购买。

## 下载示例代码

您可以从您的账户中下载所有您购买的 Packt Publishing 书籍的示例代码文件，网址是 [`www.packtpub.com`](http://www.packtpub.com)。如果您在别处购买了这本书，可以访问 [`www.packtpub.com/support`](http://www.packtpub.com/support) 注册，我们会将文件直接通过电子邮件发送给您。

## 下载本书的色彩图像

我们还为您提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的色彩图像。色彩图像可以帮助您更好地理解输出的变化。您可以从以下网址下载此文件：[`www.packtpub.com/sites/default/files/downloads/0122OS_ColoredImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/0122OS_ColoredImages.pdf)。

## 错误更正

尽管我们已经竭尽全力确保内容的准确性，但错误仍然会发生。如果您在我们的书中发现了一个错误——可能是文本或代码中的错误——如果您能向我们报告，我们将不胜感激。这样做，您可以避免其他读者感到沮丧，并帮助我们改进本书的后续版本。如果您发现任何错误，请通过访问 [`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击 **错误更正提交表单** 链接，并输入您的错误更正详情。一旦您的错误更正得到验证，您的提交将被接受，错误更正将被上传到我们的网站或添加到该标题下的现有错误更正列表中。

要查看之前提交的错误更正，请访问 [`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，在搜索字段中输入书名。所需信息将显示在 **错误更正** 部分下。

## 盗版

互联网上对版权材料的盗版是一个所有媒体都面临的持续问题。在 Packt，我们非常重视保护我们的版权和许可。如果您在互联网上以任何形式遇到我们作品非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

如发现疑似盗版材料，请通过 `<copyright@packtpub.com>` 联系我们，并提供相关链接。

我们感谢您帮助我们保护作者权益，以及我们向您提供有价值内容的能力。

## 问题

如果您对这本书的任何方面有问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决问题。
