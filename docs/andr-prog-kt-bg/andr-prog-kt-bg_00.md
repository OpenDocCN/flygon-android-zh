# 前言

您是否正在尝试开始 Android 编程的职业生涯，但还没有找到合适的方法？您是否有一个很棒的应用程序想法，但不知道如何将其变成现实？或者您只是对学习 Android 必须已经了解 Kotlin 感到沮丧。如果是这样，那么这本书就是为您准备的。

*面向初学者的 Kotlin Android 编程*将成为您创建 Android 应用程序的指南。我们将向您介绍在 Android 环境中编程的所有基本概念，从 Kotlin 的基础知识到使用 Android API。所有示例都是在官方的 Android 开发环境 Android Studio 中创建的，这有助于加速应用程序开发过程。在这个速成课程之后，我们将深入研究 Android 编程，您将学会如何通过片段创建具有专业标准 UI 的应用程序，并使用 SQLite 存储用户数据。此外，您还将了解如何使您的应用程序支持多语言，如何用手指在屏幕上绘图，以及如何处理图形、声音和动画。

通过本书，您将准备好开始在 Android 和 Kotlin 中构建自己的定制应用程序。

# 这本书是为谁准备的

如果您完全不了解 Kotlin、Android 或编程，并且想制作 Android 应用程序，那么这本书就是为您准备的。这本书也可以作为那些已经有一些基本使用 Kotlin 在 Android 上经验的人的复习，以提高他们的知识，并通过早期项目快速进步。

# 本书涵盖内容

第一章 *开始使用 Android 和 Kotlin*，欢迎您来到*令人兴奋的 Android 和 Kotlin 世界*。在这一章中，我们将立即开始开发 Android 应用程序。我们将探讨 Android 的优势，Android 和 Kotlin 是什么，它们如何工作和相互补充，以及作为未来开发人员对我们意味着什么。接下来，我们将设置所需的软件，以便我们可以构建和部署一个简单的第一个应用程序。

第二章 *Kotlin、XML 和 UI 设计师*，讨论了在这个阶段，我们已经拥有了一个可用的 Android 开发环境，并且已经构建和部署了我们的第一个应用程序。然而，显然，由 Android Studio 自动生成的代码不会成为下一个在 Google Play 上畅销的应用程序。我们需要探索这些自动生成的代码，以便我们可以开始了解 Android，然后学习如何在这个有用的模板上构建。

第三章 *探索 Android Studio 和项目结构*，带领我们创建和运行另外两个 Android 项目。这些练习的目的是更深入地探索 Android Studio 和 Android 项目的结构。当我们为部署构建我们的应用程序时，代码和资源文件需要被打包到 APK 文件中 - 就像它们现在的样子。因此，所有布局文件和其他资源，我们很快就会看到，需要以正确的结构存在。幸运的是，当我们从模板创建项目时，Android Studio 会为我们处理这些。然而，我们仍然需要知道如何找到和修改这些文件，如何添加我们自己的文件，有时删除 Android Studio 创建的文件，以及资源文件如何相互关联 - 有时与彼此关联，有时与 Kotlin 代码关联（即自动生成的 Kotlin 代码以及我们自己的代码）。除了了解我们项目的组成，确保我们充分利用模拟器也是有益的。

第四章《使用布局和 Material Design 入门》建立在我们已经看到的基础上；也就是说，Android Studio UI 设计师和更多 Kotlin 的实际操作。在这个实践性的章节中，我们将构建三个更多的布局 - 仍然相当简单，但比我们到目前为止所做的更上一层楼。在我们开始实际操作之前，我们将快速介绍**material design**的概念。我们将看看另一种称为`LinearLayout`的布局类型，并通过它来创建可用的 UI。我们将进一步使用`ConstraintLayout`来理解约束并设计更复杂和精确的 UI 设计。最后，我们将使用`TableLayout`来将数据布置在一个易读的表格中。我们还将编写一些 Kotlin 代码，以在一个应用/项目中在不同的布局之间切换。这是第一个将多个主题链接在一起的重要应用程序。这个应用程序被称为*探索布局*。

第五章《使用 CardView 和 ScrollView 创建美丽的布局》是在我们花一些时间专注于 Kotlin 和面向对象编程之前的最后一个布局章节。我们将对我们已经看到的一些不同属性进行正式学习，并且还将介绍两个更酷的布局，`ScrollView`和`CardView`。最后，我们将在平板模拟器上运行`CardView`项目。

第六章《Android 生命周期》将使我们熟悉 Android 应用程序的生命周期。一开始，计算机程序有生命周期这个概念可能听起来很奇怪，但很快就会变得合理。生命周期是所有 Android 应用程序与 Android 操作系统交互的方式。就像人类的生命周期使他们能够与周围的世界互动一样，我们别无选择，只能与 Android 生命周期互动，并且必须准备处理许多不可预测的事件，如果我们希望我们的应用程序能够生存下来。我们将探索应用程序经历的生命周期阶段，从创建到销毁，以及这如何帮助我们知道根据我们想要实现的目标在*何处*放置我们的 Kotlin 代码。

第七章《Kotlin 变量、运算符和表达式》，以及接下来的一章，解释了 Kotlin 的核心基础。实际上，我们将探索编程的主要原则。在这一章中，我们将专注于数据本身的创建和理解，在下一章中，我们将探讨如何操作和响应数据。

第八章《Kotlin 决策和循环》从变量中移开，我们现在了解如何使用表达式更改它们所持有的值，但是当一个变量的值取决于一个变量时，我们如何采取行动呢？我们当然可以将新消息的数量添加到先前未读消息的数量中，但是例如，当用户已经阅读了所有消息时，我们如何触发应用程序中的操作呢？第一个问题是我们需要一种测试变量值的方法，然后在值落在一系列值范围内或等于特定值时做出响应。编程中常见的另一个问题是，我们需要根据变量的值执行代码的某些部分一定次数（多次，或者有时根本不执行）。为了解决第一个问题，我们将学习如何在 Kotlin 中使用`if`、`else`和`when`做出决策。为了解决后者，我们将学习 Kotlin 中的循环，包括`while`、`do`-`while`、`for`、`continue`和`break`。此外，我们将了解在 Kotlin 中，决策也是产生值的表达式。

第九章，“Kotlin 函数”，解释了函数是我们应用程序的构建块。我们编写执行特定任务的函数，然后在需要执行该特定任务时调用它们。由于我们在应用程序中需要执行的任务将是相当多样化的，我们的函数需要满足这一点并且非常灵活。Kotlin 函数非常灵活，比其他与 Android 相关的语言的函数更灵活。因此，我们需要花费整整一章的时间来学习它们。函数与面向对象编程密切相关，一旦我们理解了函数的基础知识，我们就能够很好地掌握更广泛的面向对象编程的学习。

第十章，“面向对象编程”，解释了在 Kotlin 中，类对几乎所有事情都是基本的，事实上，几乎所有事情都是一个类。我们已经谈到了重用其他人的代码，特别是 Android API，但在本章中，我们将真正掌握这是如何工作的，并学习面向对象编程（OOP）以及如何使用它。

第十一章，“Kotlin 中的继承”，展示了继承的实际应用。事实上，我们已经看到了，但现在我们将更仔细地研究它，讨论其好处，并编写我们从中继承的类。在整个章节中，我将向您展示几个继承的实际例子，在本章结束时，我们将改进上一章的海战模拟，并展示如何通过使用继承来节省大量的输入和未来的调试工作。

第十二章，“将我们的 Kotlin 连接到 UI 和空值”，在本章结束时，完全揭示了我们的 Kotlin 代码和我们的 XML 布局之间的缺失链接，使我们能够像以前一样向我们的布局添加各种小部件和 UI 功能，但这一次我们将能够通过我们的代码来控制它们。在本章中，我们将控制一些简单的 UI 元素，如`Button`和`TextView`，在下一章中，我们将进一步操作一系列 UI 元素。为了使我们能够理解发生了什么，我们需要更多地了解应用程序中的内存，特别是其中的两个领域 - **堆栈**和**堆**。

第十三章，“将 Android 小部件带到生活中”，讨论了由于我们现在对 Android 应用程序的布局和编码以及我们新获得的面向对象编程（OOP）的洞察力，以及如何从我们的 Kotlin 代码中操纵 UI 有了很好的概述，我们现在可以尝试使用 Android Studio 调色板中的更多小部件。有时，OOP 是一件棘手的事情，这一章介绍了一些对初学者来说可能尴尬的主题。然而，通过逐渐学习这些新概念并反复练习，它们将随着时间的推移成为我们的朋友。在本章中，我们将通过回到 Android Studio 调色板并查看半打我们要么根本没有看到过要么尚未完全使用过的小部件来进行多样化。一旦我们这样做了，我们将把它们都放入布局中，并练习用我们的 Kotlin 代码操纵它们。

第十四章，“Android 对话框窗口”，解释了如何向用户呈现弹出式对话框窗口。然后，我们可以将我们所知道的一切放入我们的第一个多章节应用程序“Note to self”的第一阶段。然后，我们将在本章和接下来的四章（直到第十八章，“本地化”）中学习有关 Android 和 Kotlin 的新功能，然后利用我们新获得的知识来增强“Note to self”应用程序。

第十五章，“处理数据和生成随机数”，显示我们正在取得良好的进展。我们对 Android UI 选项和 Kotlin 的基础知识有了一个全面的了解。在前几章中，我们开始将这两个领域结合起来，并使用 Kotlin 代码操作 UI，包括一些新的小部件。然而，在构建 Note to self 应用程序时，我们遇到了一些知识上的空白。在本章中，我们将填补这些空白中的第一个，然后在下一章中，我们将使用这些新信息来继续应用程序。我们目前没有办法管理大量相关数据。除了声明，初始化和管理数十，数百甚至数千个属性或实例之外，我们如何让我们的应用程序用户拥有多个笔记？我们还将快速了解随机数。

第十六章，“适配器和回收器”，首先带我们了解适配器和列表的理论。然后，我们将看看如何在 Kotlin 代码中使用`RecyclerAdapter`实例，并将`RecyclerView`小部件添加到布局中，该小部件充当我们的 UI 的列表，然后通过 Android API 的明显魔力将它们绑定在一起，以便`RecyclerView`实例显示`RecyclerAdapter`实例的内容，并允许用户滚动查看充满`Note`实例的`ArrayList`实例的内容。您可能已经猜到，我们将使用这种技术来显示 Note to self 应用程序中的笔记列表。

第十七章，“数据持久性和共享”，介绍了将数据保存到 Android 设备的永久存储的几种不同方法。此外，我们将首次向我们的应用程序添加第二个`Activity`实例。在我们的应用程序中实现一个单独的“屏幕”，例如“设置”屏幕时，将新的`Activity`实例添加到其中通常是有意义的。我们可以费力地隐藏原始 UI，然后在同一个`Activity`中显示新的 UI，就像我们在第四章，“使用布局和 Material Design 入门”中所做的那样，但这很快会导致令人困惑和容易出错的代码。因此，我们将看到如何添加另一个`Activity`实例并在它们之间引导用户。

第十八章，“本地化”，快速简单，但我们将学习的内容可以使您的应用程序可供数百万潜在用户使用。我们将看到如何添加其他语言，以及为什么通过字符串资源以正确的方式添加文本在添加多种语言时对我们有益。

第十九章，“动画和插值”，探讨了如何使用`Animation`类使我们的 UI 不那么静态，更有趣。正如我们所期望的那样，Android API 将允许我们用相对简单的代码做一些相当高级的事情，`Animation`类也不例外。

第二十章，“绘图图形”，涉及 Android 的`Canvas`类和一些相关类，如`Paint`，`Color`和`Bitmap`。当这些类结合在一起时，在屏幕上绘图具有很大的能力。有时，Android API 提供的默认 UI 并不是我们所需要的。如果我们想制作绘图应用程序，绘制图表，或者可能制作游戏，我们需要控制 Android 设备提供的每个像素。

第二十一章，“线程和启动实时绘图应用程序”，让我们开始我们的下一个应用程序。这个应用程序将是一个儿童风格的绘画应用程序，用户可以用手指在屏幕上绘画。然而，我们创建的绘画应用程序将略有不同。用户绘制的线条将由粒子系统组成，这些粒子系统会爆炸成成千上万的碎片。我们将称这个项目为实时绘图。

第二十二章，“粒子系统和处理屏幕触摸”，在上一章中使用线程实现了我们的实时系统。在本章中，我们将创建实体，它们将存在并在这个实时系统中演变，就好像它们有自己的思想，并形成用户可以创建的绘画外观。我们还将看到用户如何通过学习如何响应与屏幕的交互来实现这些实体。这与在 UI 布局中与小部件交互是不同的。

第二十三章，“Android 音效和 Spinner 小部件”，探讨了 SoundPool 类以及我们根据是否只想播放声音或进一步跟踪我们正在播放的声音而使用它的不同方式。在这一点上，我们可以将我们学到的一切都投入到制作一个很酷的声音演示应用中，这也将向我们介绍一个新的 UI 小部件；Spinner。

第二十四章，“设计模式、多个布局和片段”，展示了我们从一开始就设置 Android Studio 以来所走过的路程。当时，我们一步一步地进行了所有操作，但随着我们的进行，我们试图不仅仅是展示如何将 x 添加到 y，或者将特性 a 添加到应用程序 b，而是让您能够以自己的方式使用所学知识，以实现自己的想法。这一章更多地涉及您未来应用程序的内容，而不是书中迄今为止的任何内容。我们将看一些 Kotlin 和 Android 的方面，您可以将其用作框架或模板，以制作更加令人兴奋和复杂的应用程序，同时保持代码的可管理性。

第二十五章，“具有分页和滑动的高级 UI”，解释了**分页**是从一页到另一页的移动的行为，在 Android 上，我们通过在屏幕上滑动手指来实现这一点。当前页面会根据手指的移动方向和速度进行过渡。这是一个在应用程序中导航的有用和实用的方式，但也许更重要的是，对用户来说，这是一种极其令人满意的视觉效果。此外，与`RecyclerView`一样，我们可以选择性地仅加载当前页面所需的数据，也许是先前和下一页的数据。正如您所期望的那样，Android API 有一些解决方案可以以相当简单的方式实现分页。

第二十六章，“带有导航抽屉和片段的高级 UI”，探讨了（可以说是）最高级的 UI。`NavigationView`，或者导航抽屉（因为它滑出内容的方式），可以通过在创建新项目时选择它作为模板来简单创建。我们将这样做，然后我们将检查自动生成的代码，并学习如何与其交互。然后，我们将使用我们对`Fragment`类的所有了解来填充每个“抽屉”具有不同行为和视图。然后，在下一章中，我们将学习关于数据库，以为每个`Fragment`添加一些新功能。

第二十七章 *Android 数据库*，解释了如果我们要制作提供给用户重要功能的应用程序，那么几乎肯定我们需要一种管理、存储和过滤大量数据的方法。使用 JSON 可以高效地存储大量数据，但当我们需要有选择地使用这些数据而不仅仅限制在“保存所有”和“加载所有”的选项时，我们需要考虑还有哪些其他选项可用。像往常一样，使用 Android API 中提供的解决方案是有意义的。正如我们所见，`JSON`和`SharedPreferences`类有其用武之地，但在某个时候，我们需要转而使用真正的数据库来解决现实世界的问题。Android 使用 SQLite 数据库管理系统，正如您所期望的那样，有一个 API 可以尽可能地简化它。

第二十八章 *告别前的快速交谈*，包含了一些想法和指针，您可能在匆忙离开并制作自己的应用程序之前想要看看。

# 充分利用本书

要成功阅读本书，您不需要任何经验。如果您对自己选择的操作系统（Windows、Mac 或 Linux）有信心，您可以学习使用 Kotlin 编程语言制作 Android 应用程序。学习开发专业质量的应用程序是任何人都可以开始并坚持下去的旅程。

如果您具有以前的编程（Kotlin、Java 或任何其他语言）、Android 或其他开发经验，那么您将在前几章中取得更快的进展。

## 下载示例代码文件

您可以从您在[`www.packtpub.com`](http://www.packtpub.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便直接通过电子邮件接收文件。

您可以按照以下步骤下载代码文件：

1.  在[`www.packtpub.com`](http://www.packtpub.com)上登录或注册。

1.  选择**SUPPORT**选项卡。

1.  单击**Code Downloads & Errata**。

1.  在**搜索**框中输入书名，并按照屏幕上的说明操作。

下载文件后，请确保使用最新版本的解压缩或提取文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Android-Programming-with-Kotlin-for-Beginners`](https://github.com/PacktPublishing/Android-Programming-with-Kotlin-for-Beginners)。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有来自我们丰富书籍和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)上找到。去看看吧！

## 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[`www.packtpub.com/sites/default/files/downloads/9781789615401_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/9781789615401_ColorImages.pdf)。

## 使用的约定

本书中使用了许多文本约定。

`CodeInText`：指示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。例如：“将下载的`WebStorm-10*.dmg`磁盘映像文件挂载为系统中的另一个磁盘。”

代码块设置如下：

```kt
<TextView
 android:id="@+id/textView"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:text="TextView" />
```

当我们希望引起您对代码块的特定部分的注意时，相关的行或项目将以粗体显示：

```kt
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout

  android:orientation="vertical"
 android:layout_width="match_parent"
 android:layout_height="match_parent">
</LinearLayout>  
```

**粗体**：表示一个新术语，一个重要的词，或者你在屏幕上看到的词，例如在菜单或对话框中，也会在文本中出现。例如：“如果没有，请点击**Logcat**选项卡”

### 注意

警告或重要说明会出现在这样。

### 提示

提示和技巧会出现在这样。

# 联系我们

我们的读者的反馈总是受欢迎的。

**一般反馈**：发送电子邮件至`feedback@packtpub.com`，并在主题中提及书名。如果您对本书的任何方面有疑问，请发送电子邮件至`questions@packtpub.com`与我们联系。

**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误确实会发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告。请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书，点击勘误提交表格链接，并输入详细信息。

**盗版**：如果您在互联网上发现我们作品的任何形式的非法副本，我们将不胜感激，如果您能向我们提供位置地址或网站名称。请通过`copyright@packtpub.com`与我们联系，并附上材料的链接。

**如果您有兴趣成为作者**：如果有您在某个专题上有专业知识，并且有兴趣撰写或为一本书做出贡献，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

## 评论

请留下评论。一旦您阅读并使用了这本书，为什么不在购买它的网站上留下评论呢？潜在的读者可以看到并使用您的公正意见来做出购买决定，我们在 Packt 可以了解您对我们产品的看法，我们的作者可以看到您对他们的书的反馈。谢谢！

有关 Packt 的更多信息，请访问[packtpub.com](http://packtpub.com)。
